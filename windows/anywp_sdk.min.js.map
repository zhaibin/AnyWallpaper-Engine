{"version":3,"file":"anywp_sdk.min.js","sources":["sdk/core/AnyWP.js","sdk/utils/debug.js","sdk/modules/events.js","sdk/utils/bounds.js","sdk/modules/spa.js","sdk/modules/click.js","sdk/modules/animations.js","sdk/modules/storage.js","sdk/modules/drag.js","sdk/index.js","sdk/core/init.js"],"sourcesContent":["// AnyWP Core Object Definition\r\nexport const AnyWP = {\r\n  version: '4.2.0',\r\n  dpiScale: window.devicePixelRatio || 1,\r\n  screenWidth: screen.width * (window.devicePixelRatio || 1),\r\n  screenHeight: screen.height * (window.devicePixelRatio || 1),\r\n  interactionEnabled: true,\r\n  \r\n  // Internal state\r\n  _debugMode: false,\r\n  _clickHandlers: [],\r\n  _mouseCallbacks: [],\r\n  _keyboardCallbacks: [],\r\n  _visibilityCallback: null,\r\n  _mutationObserver: null,\r\n  _resizeObserver: null,\r\n  _spaMode: false,\r\n  _autoRefreshEnabled: true,\r\n  _draggableElements: [],\r\n  _dragState: null,\r\n  _persistedState: {},\r\n  \r\n  // Initialize (will be implemented in init.js)\r\n  _init() {\r\n    throw new Error('_init must be implemented');\r\n  }\r\n};\r\n\r\n","// Debug utilities module\r\nexport const Debug = {\r\n  enabled: false,\r\n  \r\n  // Enable debug mode\r\n  enable() {\r\n    this.enabled = true;\r\n    console.log('[AnyWP] Debug mode ENABLED');\r\n  },\r\n  \r\n  // Log with debug control\r\n  log(message, forceLog = false) {\r\n    if (this.enabled || forceLog) {\r\n      console.log('[AnyWP] ' + message);\r\n    }\r\n  },\r\n  \r\n  // Show debug border around element\r\n  showBorder(bounds, element, dpiScale) {\r\n    // Remove old border if exists\r\n    const oldBorder = element._anywpDebugBorder;\r\n    if (oldBorder && oldBorder.parentNode) {\r\n      oldBorder.parentNode.removeChild(oldBorder);\r\n    }\r\n    \r\n    const border = document.createElement('div');\r\n    border.className = 'AnyWP-debug-border';\r\n    border.style.cssText = \r\n      'position: fixed;' +\r\n      'left: ' + (bounds.left / dpiScale) + 'px;' +\r\n      'top: ' + (bounds.top / dpiScale) + 'px;' +\r\n      'width: ' + (bounds.width / dpiScale) + 'px;' +\r\n      'height: ' + (bounds.height / dpiScale) + 'px;' +\r\n      'border: 2px solid red;' +\r\n      'box-shadow: 0 0 10px red;' +\r\n      'pointer-events: none;' +\r\n      'z-index: 999999;';\r\n    document.body.appendChild(border);\r\n    \r\n    element._anywpDebugBorder = border;\r\n  },\r\n  \r\n  // Detect debug mode from URL parameter\r\n  detectFromURL() {\r\n    const urlParams = new URLSearchParams(window.location.search);\r\n    if (urlParams.has('debug')) {\r\n      this.enable();\r\n    }\r\n  }\r\n};\r\n\r\n","// Event system module\r\nimport { Debug } from '../utils/debug.js';\r\n\r\nexport const Events = {\r\n  // Setup event listeners\r\n  setup(anyWP, clickHandler, animationsHandler) {\r\n    window.addEventListener('AnyWP:mouse', function(event) {\r\n      anyWP._mouseCallbacks.forEach(function(cb) {\r\n        cb(event.detail);\r\n      });\r\n    });\r\n    \r\n    window.addEventListener('AnyWP:keyboard', function(event) {\r\n      anyWP._keyboardCallbacks.forEach(function(cb) {\r\n        cb(event.detail);\r\n      });\r\n    });\r\n    \r\n    window.addEventListener('AnyWP:click', function(event) {\r\n      clickHandler.handleClick(event.detail.x, event.detail.y);\r\n    });\r\n    \r\n    window.addEventListener('AnyWP:interactionMode', function(event) {\r\n      anyWP.interactionEnabled = event.detail.enabled;\r\n      Debug.log('Interaction mode: ' + (anyWP.interactionEnabled ? 'ON' : 'OFF'), true);\r\n    });\r\n    \r\n    window.addEventListener('AnyWP:visibility', function(event) {\r\n      const visible = event.detail.visible;\r\n      Debug.log('Visibility changed: ' + (visible ? 'visible' : 'hidden'), true);\r\n      \r\n      if (anyWP._visibilityCallback) {\r\n        anyWP._visibilityCallback(visible);\r\n      }\r\n      \r\n      if (!visible) {\r\n        animationsHandler.pause();\r\n      } else {\r\n        animationsHandler.resume();\r\n      }\r\n    });\r\n    \r\n    window.addEventListener('resize', function() {\r\n      Debug.log('Window resized, refreshing...');\r\n      setTimeout(function() {\r\n        clickHandler.refreshBounds();\r\n      }, 200);\r\n    });\r\n  },\r\n  \r\n  // Register mouse callback\r\n  onMouse(anyWP, callback) {\r\n    anyWP._mouseCallbacks.push(callback);\r\n    Debug.log('Mouse callback registered');\r\n  },\r\n  \r\n  // Register keyboard callback\r\n  onKeyboard(anyWP, callback) {\r\n    anyWP._keyboardCallbacks.push(callback);\r\n    Debug.log('Keyboard callback registered');\r\n  },\r\n  \r\n  // Register visibility callback\r\n  onVisibilityChange(anyWP, callback) {\r\n    anyWP._visibilityCallback = callback;\r\n    Debug.log('Visibility callback registered');\r\n  },\r\n  \r\n  // Notify visibility change (called by C++)\r\n  notifyVisibilityChange(anyWP, visible) {\r\n    console.log('[AnyWP] _notifyVisibilityChange called:', visible);\r\n    \r\n    if (anyWP._visibilityCallback && typeof anyWP._visibilityCallback === 'function') {\r\n      try {\r\n        anyWP._visibilityCallback(visible);\r\n        console.log('[AnyWP] Visibility callback executed successfully');\r\n      } catch(e) {\r\n        console.error('[AnyWP] Error in visibility callback:', e);\r\n      }\r\n    } else {\r\n      console.log('[AnyWP] No visibility callback registered');\r\n    }\r\n    \r\n    try {\r\n      var event = new CustomEvent('AnyWP:visibility', {\r\n        detail: { visible: visible }\r\n      });\r\n      window.dispatchEvent(event);\r\n      console.log('[AnyWP] AnyWP:visibility event dispatched');\r\n    } catch(e) {\r\n      console.error('[AnyWP] Error dispatching visibility event:', e);\r\n    }\r\n  }\r\n};\r\n\r\n","// Bounds calculation utilities\r\nexport const Bounds = {\r\n  // Calculate element bounds in physical pixels\r\n  calculate(element, dpiScale) {\r\n    const rect = element.getBoundingClientRect();\r\n    \r\n    return {\r\n      left: Math.round(rect.left * dpiScale),\r\n      top: Math.round(rect.top * dpiScale),\r\n      right: Math.round(rect.right * dpiScale),\r\n      bottom: Math.round(rect.bottom * dpiScale),\r\n      width: Math.round(rect.width * dpiScale),\r\n      height: Math.round(rect.height * dpiScale)\r\n    };\r\n  },\r\n  \r\n  // Check if point is in bounds\r\n  isInBounds(x, y, bounds) {\r\n    return x >= bounds.left && x <= bounds.right &&\r\n           y >= bounds.top && y <= bounds.bottom;\r\n  },\r\n  \r\n  // Check if mouse (in physical pixels) is over element\r\n  isMouseOverElement(mouseX, mouseY, element, dpiScale) {\r\n    const rect = element.getBoundingClientRect();\r\n    \r\n    const physicalLeft = Math.round(rect.left * dpiScale);\r\n    const physicalTop = Math.round(rect.top * dpiScale);\r\n    const physicalRight = Math.round(rect.right * dpiScale);\r\n    const physicalBottom = Math.round(rect.bottom * dpiScale);\r\n    \r\n    return mouseX >= physicalLeft && mouseX <= physicalRight &&\r\n           mouseY >= physicalTop && mouseY <= physicalBottom;\r\n  }\r\n};\r\n\r\n","// SPA framework support module\r\nimport { Debug } from '../utils/debug.js';\r\nimport { Bounds } from '../utils/bounds.js';\r\n\r\nexport const SPA = {\r\n  // Detect SPA framework\r\n  detect(anyWP, clickHandler) {\r\n    const self = this;\r\n    \r\n    // Immediate check for React/Vue/Angular globals\r\n    const isReact = !!(window.React || window.ReactDOM);\r\n    const isVue = !!(window.Vue);\r\n    const isAngular = !!(window.angular);\r\n    \r\n    if (isReact || isVue || isAngular) {\r\n      anyWP._spaMode = true;\r\n      const framework = isReact ? 'React' : (isVue ? 'Vue' : 'Angular');\r\n      console.log('[AnyWP] SPA Framework detected: ' + framework);\r\n      self.setupMonitoring(anyWP, clickHandler);\r\n    } else {\r\n      // Delayed check for DOM elements\r\n      setTimeout(function() {\r\n        const isReactDOM = !!document.querySelector('[data-reactroot], [data-reactid], #root');\r\n        const isVueDOM = !!document.querySelector('[data-v-]');\r\n        const isAngularDOM = !!document.querySelector('[ng-version]');\r\n        \r\n        if (isReactDOM || isVueDOM || isAngularDOM) {\r\n          anyWP._spaMode = true;\r\n          const framework = isReactDOM ? 'React' : (isVueDOM ? 'Vue' : 'Angular');\r\n          console.log('[AnyWP] SPA Framework detected: ' + framework);\r\n          self.setupMonitoring(anyWP, clickHandler);\r\n        }\r\n      }, 500);\r\n    }\r\n  },\r\n  \r\n  // Enable/Disable SPA mode manually\r\n  setSPAMode(anyWP, clickHandler, enabled) {\r\n    anyWP._spaMode = enabled;\r\n    console.log('[AnyWP] SPA mode: ' + (enabled ? 'ENABLED' : 'DISABLED'));\r\n    \r\n    if (enabled) {\r\n      this.setupMonitoring(anyWP, clickHandler);\r\n    } else {\r\n      this.teardownMonitoring(anyWP);\r\n    }\r\n  },\r\n  \r\n  // Setup SPA monitoring\r\n  setupMonitoring(anyWP, clickHandler) {\r\n    const self = this;\r\n    \r\n    // Monitor history changes\r\n    const originalPushState = history.pushState;\r\n    const originalReplaceState = history.replaceState;\r\n    \r\n    history.pushState = function() {\r\n      originalPushState.apply(history, arguments);\r\n      self.onRouteChange(anyWP, clickHandler);\r\n    };\r\n    \r\n    history.replaceState = function() {\r\n      originalReplaceState.apply(history, arguments);\r\n      self.onRouteChange(anyWP, clickHandler);\r\n    };\r\n    \r\n    window.addEventListener('popstate', function() {\r\n      self.onRouteChange(anyWP, clickHandler);\r\n    });\r\n    \r\n    // Monitor DOM mutations\r\n    if (window.MutationObserver) {\r\n      anyWP._mutationObserver = new MutationObserver(function(mutations) {\r\n        let shouldRefresh = false;\r\n        \r\n        mutations.forEach(function(mutation) {\r\n          if (mutation.type === 'childList' || mutation.type === 'attributes') {\r\n            anyWP._clickHandlers.forEach(function(handler) {\r\n              if (mutation.target === handler.element || \r\n                  mutation.target.contains(handler.element)) {\r\n                shouldRefresh = true;\r\n              }\r\n            });\r\n          }\r\n        });\r\n        \r\n        if (shouldRefresh) {\r\n          clickHandler.refreshBounds(anyWP);\r\n        }\r\n      });\r\n      \r\n      anyWP._mutationObserver.observe(document.body, {\r\n        childList: true,\r\n        subtree: true,\r\n        attributes: true,\r\n        attributeFilter: ['class', 'style']\r\n      });\r\n    }\r\n  },\r\n  \r\n  // Teardown SPA monitoring\r\n  teardownMonitoring(anyWP) {\r\n    if (anyWP._mutationObserver) {\r\n      anyWP._mutationObserver.disconnect();\r\n      anyWP._mutationObserver = null;\r\n    }\r\n  },\r\n  \r\n  // Handle SPA route change\r\n  onRouteChange(anyWP, clickHandler) {\r\n    Debug.log('Route changed, refreshing...');\r\n    \r\n    setTimeout(function() {\r\n      anyWP._clickHandlers.forEach(function(handler) {\r\n        if (handler.selector && handler.autoRefresh) {\r\n          const newElement = document.querySelector(handler.selector);\r\n          if (newElement && newElement !== handler.element) {\r\n            handler.element = newElement;\r\n            clickHandler.refreshElementBounds(anyWP, handler);\r\n            \r\n            if (handler.resizeObserver) {\r\n              handler.resizeObserver.disconnect();\r\n            }\r\n            if (window.ResizeObserver) {\r\n              const resizeObserver = new ResizeObserver(function() {\r\n                clickHandler.refreshElementBounds(anyWP, handler);\r\n              });\r\n              resizeObserver.observe(newElement);\r\n              handler.resizeObserver = resizeObserver;\r\n            }\r\n          }\r\n        }\r\n      });\r\n      \r\n      clickHandler.refreshBounds(anyWP);\r\n    }, 500);\r\n  }\r\n};\r\n\r\n","// Click handler module\r\nimport { Debug } from '../utils/debug.js';\r\nimport { Bounds } from '../utils/bounds.js';\r\n\r\nexport const ClickHandler = {\r\n  // Handle click event from native\r\n  handleClick(anyWP, x, y) {\r\n    Debug.log('Click at: (' + x + ',' + y + ')');\r\n    \r\n    for (let i = 0; i < anyWP._clickHandlers.length; i++) {\r\n      const handler = anyWP._clickHandlers[i];\r\n      \r\n      if (Bounds.isInBounds(x, y, handler.bounds)) {\r\n        Debug.log('HIT: ' + (handler.element.id || handler.element.className));\r\n        handler.callback(x, y);\r\n        break;\r\n      }\r\n    }\r\n  },\r\n  \r\n  // Wait for element to appear in DOM\r\n  waitForElement(selector, callback, maxWait = 10000) {\r\n    const startTime = Date.now();\r\n    \r\n    function check() {\r\n      const element = document.querySelector(selector);\r\n      if (element) {\r\n        callback(element);\r\n      } else if (Date.now() - startTime < maxWait) {\r\n        setTimeout(check, 100);\r\n      } else {\r\n        console.error('[AnyWP] Element not found: ' + selector);\r\n      }\r\n    }\r\n    \r\n    check();\r\n  },\r\n  \r\n  // Register click handler with SPA support\r\n  onClick(anyWP, element, callback, options = {}) {\r\n    const self = this;\r\n    const immediate = options.immediate || false;\r\n    const waitFor = options.waitFor !== undefined ? options.waitFor : !immediate;\r\n    const maxWait = options.maxWait || 10000;\r\n    const autoRefresh = options.autoRefresh !== undefined ? options.autoRefresh : anyWP._autoRefreshEnabled;\r\n    const delay = options.delay || (immediate ? 0 : 100);\r\n    \r\n    function registerElement(el) {\r\n      if (!el) {\r\n        console.error('[AnyWP] Element not found:', element);\r\n        return;\r\n      }\r\n      \r\n      // Check if already registered\r\n      const existingIndex = anyWP._clickHandlers.findIndex(function(h) {\r\n        return h.element === el;\r\n      });\r\n      \r\n      if (existingIndex !== -1) {\r\n        Debug.log('Element already registered, updating bounds...');\r\n        anyWP._clickHandlers.splice(existingIndex, 1);\r\n      }\r\n      \r\n      // Calculate bounds\r\n      const bounds = Bounds.calculate(el, anyWP.dpiScale);\r\n      \r\n      // Register handler\r\n      const handlerData = {\r\n        element: el,\r\n        callback: callback,\r\n        bounds: bounds,\r\n        selector: typeof element === 'string' ? element : null,\r\n        autoRefresh: autoRefresh,\r\n        options: options\r\n      };\r\n      \r\n      anyWP._clickHandlers.push(handlerData);\r\n      \r\n      // Setup ResizeObserver\r\n      if (autoRefresh && window.ResizeObserver) {\r\n        const resizeObserver = new ResizeObserver(function() {\r\n          self.refreshElementBounds(anyWP, handlerData);\r\n        });\r\n        resizeObserver.observe(el);\r\n        handlerData.resizeObserver = resizeObserver;\r\n      }\r\n      \r\n      // Debug output\r\n      const showDebug = (options.debug !== undefined) ? options.debug : anyWP._debugMode;\r\n      if (showDebug) {\r\n        console.log('[AnyWP] Click Handler Registered:', el.id || el.className);\r\n        console.log('  Physical: [' + bounds.left + ',' + bounds.top + '] ~ [' + \r\n                    bounds.right + ',' + bounds.bottom + ']');\r\n        console.log('  Size: ' + bounds.width + 'x' + bounds.height);\r\n        \r\n        Debug.showBorder(bounds, el, anyWP.dpiScale);\r\n      }\r\n    }\r\n    \r\n    // Execute registration\r\n    if (immediate) {\r\n      let el = element;\r\n      if (typeof element === 'string') {\r\n        el = document.querySelector(element);\r\n      }\r\n      registerElement(el);\r\n    } else if (waitFor && typeof element === 'string') {\r\n      this.waitForElement(element, registerElement, maxWait);\r\n    } else {\r\n      setTimeout(function() {\r\n        let el = element;\r\n        if (typeof element === 'string') {\r\n          el = document.querySelector(element);\r\n        }\r\n        registerElement(el);\r\n      }, delay);\r\n    }\r\n  },\r\n  \r\n  // Refresh bounds for a specific handler\r\n  refreshElementBounds(anyWP, handler) {\r\n    if (!handler.element || !handler.element.isConnected) {\r\n      return;\r\n    }\r\n    \r\n    const newBounds = Bounds.calculate(handler.element, anyWP.dpiScale);\r\n    \r\n    const changed = \r\n      newBounds.left !== handler.bounds.left ||\r\n      newBounds.top !== handler.bounds.top ||\r\n      newBounds.width !== handler.bounds.width ||\r\n      newBounds.height !== handler.bounds.height;\r\n    \r\n    if (changed) {\r\n      handler.bounds = newBounds;\r\n      \r\n      if (handler.element._anywpDebugBorder) {\r\n        Debug.showBorder(newBounds, handler.element, anyWP.dpiScale);\r\n      }\r\n    }\r\n  },\r\n  \r\n  // Refresh all registered click handlers' bounds\r\n  refreshBounds(anyWP) {\r\n    const self = this;\r\n    let refreshed = 0;\r\n    \r\n    anyWP._clickHandlers.forEach(function(handler) {\r\n      if (handler.element && handler.element.isConnected) {\r\n        self.refreshElementBounds(anyWP, handler);\r\n        refreshed++;\r\n      }\r\n    });\r\n    \r\n    Debug.log('Refreshed ' + refreshed + ' elements', true);\r\n    return refreshed;\r\n  },\r\n  \r\n  // Clear all registered handlers\r\n  clearHandlers(anyWP) {\r\n    anyWP._clickHandlers.forEach(function(handler) {\r\n      if (handler.resizeObserver) {\r\n        handler.resizeObserver.disconnect();\r\n      }\r\n      if (handler.element && handler.element._anywpDebugBorder) {\r\n        const border = handler.element._anywpDebugBorder;\r\n        if (border.parentNode) {\r\n          border.parentNode.removeChild(border);\r\n        }\r\n      }\r\n    });\r\n    \r\n    anyWP._clickHandlers = [];\r\n    Debug.log('All handlers cleared', true);\r\n  }\r\n};\r\n\r\n","// Animation control module\r\nexport const Animations = {\r\n  // Auto-pause all animations for power saving\r\n  pause() {\r\n    if (window.__anyWP_animationsPaused) {\r\n      return;\r\n    }\r\n    \r\n    console.log('[AnyWP] Auto-pausing all animations for power saving...');\r\n    window.__anyWP_animationsPaused = true;\r\n    \r\n    try {\r\n      // 1. Pause all videos\r\n      var videos = document.querySelectorAll('video');\r\n      console.log('[AnyWP] Found ' + videos.length + ' video(s)');\r\n      videos.forEach(function(video) {\r\n        try {\r\n          if (!video.paused) {\r\n            video.__anyWP_wasPlaying = true;\r\n            video.pause();\r\n          }\r\n        } catch(e) {\r\n          console.warn('[AnyWP] Failed to pause video:', e);\r\n        }\r\n      });\r\n      \r\n      // 2. Pause all audio\r\n      var audios = document.querySelectorAll('audio');\r\n      console.log('[AnyWP] Found ' + audios.length + ' audio(s)');\r\n      audios.forEach(function(audio) {\r\n        try {\r\n          if (!audio.paused) {\r\n            audio.__anyWP_wasPlaying = true;\r\n            audio.pause();\r\n          }\r\n        } catch(e) {\r\n          console.warn('[AnyWP] Failed to pause audio:', e);\r\n        }\r\n      });\r\n      \r\n      // 3. Pause CSS animations\r\n      var pauseStyle = document.getElementById('__anywp_pause_style');\r\n      if (!pauseStyle) {\r\n        pauseStyle = document.createElement('style');\r\n        pauseStyle.id = '__anywp_pause_style';\r\n        pauseStyle.textContent = '* { animation-play-state: paused !important; } *::before, *::after { animation-play-state: paused !important; }';\r\n        if (document.head) {\r\n          document.head.appendChild(pauseStyle);\r\n          console.log('[AnyWP] CSS animations paused');\r\n        }\r\n      }\r\n      \r\n      // 4. Intercept requestAnimationFrame\r\n      if (!window.__anyWP_originalRAF) {\r\n        window.__anyWP_originalRAF = window.requestAnimationFrame;\r\n        window.__anyWP_originalCancelRAF = window.cancelAnimationFrame;\r\n        \r\n        window.requestAnimationFrame = function(callback) { return 0; };\r\n        window.cancelAnimationFrame = function(id) {};\r\n        \r\n        console.log('[AnyWP] requestAnimationFrame disabled');\r\n      }\r\n      \r\n      console.log('[AnyWP] Auto-pause complete');\r\n    } catch(e) {\r\n      console.error('[AnyWP] Error during auto-pause:', e);\r\n    }\r\n  },\r\n  \r\n  // Auto-resume all animations\r\n  resume() {\r\n    if (!window.__anyWP_animationsPaused) {\r\n      return;\r\n    }\r\n    \r\n    console.log('[AnyWP] Auto-resuming all animations...');\r\n    window.__anyWP_animationsPaused = false;\r\n    \r\n    try {\r\n      // 1. Remove CSS pause style\r\n      var pauseStyle = document.getElementById('__anywp_pause_style');\r\n      if (pauseStyle) {\r\n        pauseStyle.remove();\r\n        console.log('[AnyWP] CSS animations resumed');\r\n      }\r\n      \r\n      // 2. Restore requestAnimationFrame\r\n      if (window.__anyWP_originalRAF) {\r\n        window.requestAnimationFrame = window.__anyWP_originalRAF;\r\n        window.cancelAnimationFrame = window.__anyWP_originalCancelRAF;\r\n        delete window.__anyWP_originalRAF;\r\n        delete window.__anyWP_originalCancelRAF;\r\n        console.log('[AnyWP] requestAnimationFrame restored');\r\n      }\r\n      \r\n      // 3. Resume videos\r\n      var videos = document.querySelectorAll('video');\r\n      videos.forEach(function(video) {\r\n        try {\r\n          if (video.__anyWP_wasPlaying) {\r\n            video.play().catch(function(e) {\r\n              console.warn('[AnyWP] Failed to resume video:', e);\r\n            });\r\n            delete video.__anyWP_wasPlaying;\r\n          }\r\n        } catch(e) {\r\n          console.warn('[AnyWP] Error resuming video:', e);\r\n        }\r\n      });\r\n      \r\n      // 4. Resume audio\r\n      var audios = document.querySelectorAll('audio');\r\n      audios.forEach(function(audio) {\r\n        try {\r\n          if (audio.__anyWP_wasPlaying) {\r\n            audio.play().catch(function(e) {\r\n              console.warn('[AnyWP] Failed to resume audio:', e);\r\n            });\r\n            delete audio.__anyWP_wasPlaying;\r\n          }\r\n        } catch(e) {\r\n          console.warn('[AnyWP] Error resuming audio:', e);\r\n        }\r\n      });\r\n      \r\n      console.log('[AnyWP] Auto-resume complete');\r\n    } catch(e) {\r\n      console.error('[AnyWP] Error during auto-resume:', e);\r\n    }\r\n  }\r\n};\r\n\r\n","// State persistence module\r\nimport { Debug } from '../utils/debug.js';\r\n\r\nexport const Storage = {\r\n  // Load state from native storage\r\n  load(anyWP, key, callback) {\r\n    console.log('[AnyWP] Loading state for key:', key);\r\n    \r\n    // Check local cache first\r\n    if (anyWP._persistedState[key]) {\r\n      console.log('[AnyWP] Found in cache:', anyWP._persistedState[key]);\r\n      callback(anyWP._persistedState[key]);\r\n      return;\r\n    }\r\n    \r\n    // Request from native layer\r\n    if (window.chrome && window.chrome.webview) {\r\n      console.log('[AnyWP] Requesting state from native layer...');\r\n      \r\n      const handler = function(event) {\r\n        if (event.detail && event.detail.type === 'stateLoaded' && event.detail.key === key) {\r\n          console.log('[AnyWP] Received stateLoaded event:', event.detail);\r\n          window.removeEventListener('AnyWP:stateLoaded', handler);\r\n          \r\n          const value = event.detail.value ? JSON.parse(event.detail.value) : null;\r\n          anyWP._persistedState[key] = value;\r\n          console.log('[AnyWP] State loaded successfully:', value);\r\n          callback(value);\r\n        }\r\n      };\r\n      \r\n      window.addEventListener('AnyWP:stateLoaded', handler);\r\n      \r\n      window.chrome.webview.postMessage({\r\n        type: 'loadState',\r\n        key: key\r\n      });\r\n      \r\n      setTimeout(function() {\r\n        window.removeEventListener('AnyWP:stateLoaded', handler);\r\n        console.log('[AnyWP] loadState timeout for key:', key);\r\n        callback(null);\r\n      }, 1000);\r\n    } else {\r\n      console.warn('[AnyWP] chrome.webview not available, using localStorage');\r\n      try {\r\n        const stored = localStorage.getItem('AnyWP_' + key);\r\n        const value = stored ? JSON.parse(stored) : null;\r\n        anyWP._persistedState[key] = value;\r\n        console.log('[AnyWP] Loaded from localStorage:', value);\r\n        callback(value);\r\n      } catch (e) {\r\n        console.error('[AnyWP] Failed to load state:', e);\r\n        callback(null);\r\n      }\r\n    }\r\n  },\r\n  \r\n  // Save custom state\r\n  save(anyWP, key, value) {\r\n    anyWP._persistedState[key] = value;\r\n    \r\n    if (window.chrome && window.chrome.webview) {\r\n      window.chrome.webview.postMessage({\r\n        type: 'saveState',\r\n        key: key,\r\n        value: JSON.stringify(value)\r\n      });\r\n      \r\n      Debug.log('Saved state for ' + key);\r\n    } else {\r\n      try {\r\n        localStorage.setItem('AnyWP_' + key, JSON.stringify(value));\r\n        Debug.log('Saved state to localStorage for ' + key);\r\n      } catch (e) {\r\n        console.warn('[AnyWP] Failed to save state:', e);\r\n      }\r\n    }\r\n  },\r\n  \r\n  // Clear all saved state\r\n  clear(anyWP) {\r\n    anyWP._persistedState = {};\r\n    \r\n    if (window.chrome && window.chrome.webview) {\r\n      window.chrome.webview.postMessage({\r\n        type: 'clearState'\r\n      });\r\n      \r\n      Debug.log('Cleared all saved state');\r\n    } else {\r\n      try {\r\n        const keys = Object.keys(localStorage);\r\n        keys.forEach(function(key) {\r\n          if (key.startsWith('AnyWP_')) {\r\n            localStorage.removeItem(key);\r\n          }\r\n        });\r\n        Debug.log('Cleared localStorage state');\r\n      } catch (e) {\r\n        console.warn('[AnyWP] Failed to clear state:', e);\r\n      }\r\n    }\r\n  },\r\n  \r\n  // Save element position\r\n  saveElementPosition(anyWP, key, x, y) {\r\n    const position = { left: x, top: y };\r\n    \r\n    console.log('[AnyWP] Saving position for ' + key + ': ', position);\r\n    \r\n    anyWP._persistedState[key] = position;\r\n    \r\n    if (window.chrome && window.chrome.webview) {\r\n      const msg = {\r\n        type: 'saveState',\r\n        key: key,\r\n        value: JSON.stringify(position)\r\n      };\r\n      console.log('[AnyWP] Sending saveState message:', msg);\r\n      window.chrome.webview.postMessage(msg);\r\n      console.log('[AnyWP] Message sent successfully');\r\n    } else {\r\n      console.warn('[AnyWP] chrome.webview not available, using localStorage');\r\n      try {\r\n        localStorage.setItem('AnyWP_' + key, JSON.stringify(position));\r\n        console.log('[AnyWP] Saved to localStorage for ' + key);\r\n      } catch (e) {\r\n        console.error('[AnyWP] Failed to save state:', e);\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\n","// Drag & Drop module\r\nimport { Debug } from '../utils/debug.js';\r\nimport { Coordinates } from '../utils/coordinates.js';\r\nimport { Storage } from './storage.js';\r\n\r\nexport const DragHandler = {\r\n  // Make element draggable\r\n  makeDraggable(anyWP, element, options = {}) {\r\n    const self = this;\r\n    const persistKey = options.persistKey || null;\r\n    const onDragStart = options.onDragStart || null;\r\n    const onDrag = options.onDrag || null;\r\n    const onDragEnd = options.onDragEnd || null;\r\n    const bounds = options.bounds || null;\r\n    \r\n    let el = element;\r\n    if (typeof element === 'string') {\r\n      el = document.querySelector(element);\r\n    }\r\n    \r\n    if (!el) {\r\n      console.error('[AnyWP] Element not found:', element);\r\n      return;\r\n    }\r\n    \r\n    // Load persisted position\r\n    if (persistKey) {\r\n      Storage.load(anyWP, persistKey, function(savedPos) {\r\n        if (savedPos) {\r\n          el.style.position = 'absolute';\r\n          el.style.left = savedPos.left + 'px';\r\n          el.style.top = savedPos.top + 'px';\r\n          console.log('[AnyWP] Restored position for ' + persistKey + ': ' + savedPos.left + ',' + savedPos.top);\r\n        }\r\n      });\r\n    }\r\n    \r\n    // Register draggable element\r\n    const draggableData = {\r\n      element: el,\r\n      persistKey: persistKey,\r\n      onDragStart: onDragStart,\r\n      onDrag: onDrag,\r\n      onDragEnd: onDragEnd,\r\n      bounds: bounds\r\n    };\r\n    \r\n    anyWP._draggableElements.push(draggableData);\r\n    \r\n    // Setup element styles\r\n    if (window.getComputedStyle(el).position === 'static') {\r\n      el.style.position = 'absolute';\r\n    }\r\n    \r\n    el.style.cursor = 'move';\r\n    el.style.userSelect = 'none';\r\n    el.style.webkitUserSelect = 'none';\r\n    el.style.mozUserSelect = 'none';\r\n    el.style.msUserSelect = 'none';\r\n    \r\n    el.draggable = false;\r\n    el.ondragstart = function(e) { \r\n      e.preventDefault(); \r\n      return false; \r\n    };\r\n    \r\n    el.onselectstart = function(e) {\r\n      e.preventDefault();\r\n      return false;\r\n    };\r\n    \r\n    // Register global mouse handler\r\n    function handleGlobalMouse(event) {\r\n      if (!anyWP.interactionEnabled) {\r\n        Debug.log('[makeDraggable] Interaction disabled, ignoring event');\r\n        return;\r\n      }\r\n      \r\n      const detail = event.detail;\r\n      const mouseX = detail.x;\r\n      const mouseY = detail.y;\r\n      const mouseType = detail.type;\r\n      \r\n      const rect = el.getBoundingClientRect();\r\n      const dpi = anyWP.dpiScale;\r\n      \r\n      const windowLeft = (typeof window.screenX !== 'undefined') ? window.screenX : 0;\r\n      const windowTop = (typeof window.screenY !== 'undefined') ? window.screenY : 0;\r\n      const docRect = document.documentElement.getBoundingClientRect();\r\n      \r\n      const viewportMouseX = (mouseX / dpi) - windowLeft - docRect.left;\r\n      const viewportMouseY = (mouseY / dpi) - windowTop - docRect.top;\r\n      \r\n      const elementLeft = rect.left;\r\n      const elementTop = rect.top;\r\n      const elementRight = rect.right;\r\n      const elementBottom = rect.bottom;\r\n      \r\n      const isOver = viewportMouseX >= elementLeft && viewportMouseX <= elementRight &&\r\n                     viewportMouseY >= elementTop && viewportMouseY <= elementBottom;\r\n      \r\n      if (mouseType === 'mousedown') {\r\n        const elementId = el.id || el.className || 'unknown';\r\n        console.log('[AnyWP] [makeDraggable] mousedown on ' + elementId + ' - Mouse (screen):', mouseX, mouseY,\r\n                    'Mouse (viewport CSS):', viewportMouseX.toFixed(1), viewportMouseY.toFixed(1),\r\n                    'Element (viewport CSS):', elementLeft.toFixed(1), elementTop.toFixed(1), elementRight.toFixed(1), elementBottom.toFixed(1),\r\n                    'isOver:', isOver,\r\n                    'dragState:', anyWP._dragState ? 'EXISTS' : 'NULL',\r\n                    'Window offset:', windowLeft, windowTop,\r\n                    'Doc offset:', docRect.left.toFixed(1), docRect.top.toFixed(1),\r\n                    'DPI:', dpi);\r\n        \r\n        const statusEl = document.getElementById('drag-status');\r\n        if (statusEl) {\r\n          if (isOver) {\r\n            statusEl.innerHTML = 'ðŸ“ æ£€æµ‹åˆ°ç‚¹å‡»åœ¨ ' + elementId + ' ä¸Š - å‡†å¤‡æ‹–æ‹½';\r\n            statusEl.style.color = '#4CAF50';\r\n          } else {\r\n            statusEl.innerHTML = \r\n              'ðŸ“ ç‚¹å‡»ä¸åœ¨ ' + elementId + ' ä¸Š (é¼ æ ‡: ' + viewportMouseX.toFixed(0) + ',' + viewportMouseY.toFixed(0) + \r\n              ' | å…ƒç´ : ' + elementLeft.toFixed(0) + ',' + elementTop.toFixed(0) + '-' + elementRight.toFixed(0) + ',' + elementBottom.toFixed(0) + ')';\r\n            statusEl.style.color = '#ff9800';\r\n          }\r\n        }\r\n      }\r\n      \r\n      if (mouseType !== 'mousemove') {\r\n        Debug.log('[makeDraggable] Mouse event: ' + mouseType + ' at screen (' + mouseX + ',' + mouseY + ') -> viewport CSS (' + viewportMouseX.toFixed(1) + ',' + viewportMouseY.toFixed(1) + ')');\r\n      }\r\n      \r\n      if (mouseType === 'mousedown' && isOver && !anyWP._dragState) {\r\n        console.log('[AnyWP] [Drag] START - Mouse at viewport CSS (' + viewportMouseX.toFixed(1) + ',' + viewportMouseY.toFixed(1) + ')');\r\n        \r\n        anyWP._dragState = {\r\n          element: el,\r\n          data: draggableData,\r\n          startX: viewportMouseX,\r\n          startY: viewportMouseY,\r\n          offsetX: viewportMouseX - elementLeft,\r\n          offsetY: viewportMouseY - elementTop,\r\n          initialLeft: elementLeft,\r\n          initialTop: elementTop,\r\n          windowLeft: windowLeft,\r\n          windowTop: windowTop,\r\n          docLeft: docRect.left,\r\n          docTop: docRect.top,\r\n          dpi: dpi\r\n        };\r\n        \r\n        if (onDragStart) {\r\n          onDragStart({\r\n            x: elementLeft,\r\n            y: elementTop\r\n          });\r\n        }\r\n        \r\n        Debug.log('Drag start at: ' + viewportMouseX.toFixed(1) + ',' + viewportMouseY.toFixed(1) + ' (element at ' + elementLeft.toFixed(1) + ',' + elementTop.toFixed(1) + ')', true);\r\n      }\r\n      else if (mouseType === 'mousemove' && anyWP._dragState && anyWP._dragState.element === el) {\r\n        const currentViewportX = (mouseX / anyWP._dragState.dpi) - anyWP._dragState.windowLeft - anyWP._dragState.docLeft;\r\n        const currentViewportY = (mouseY / anyWP._dragState.dpi) - anyWP._dragState.windowTop - anyWP._dragState.docTop;\r\n        \r\n        let newLeft = currentViewportX - anyWP._dragState.offsetX;\r\n        let newTop = currentViewportY - anyWP._dragState.offsetY;\r\n        \r\n        if (bounds) {\r\n          if (bounds.left !== undefined) {\r\n            newLeft = Math.max(bounds.left, newLeft);\r\n          }\r\n          if (bounds.top !== undefined) {\r\n            newTop = Math.max(bounds.top, newTop);\r\n          }\r\n          if (bounds.right !== undefined) {\r\n            newLeft = Math.min(bounds.right - el.offsetWidth, newLeft);\r\n          }\r\n          if (bounds.bottom !== undefined) {\r\n            newTop = Math.min(bounds.bottom - el.offsetHeight, newTop);\r\n          }\r\n        }\r\n        \r\n        el.style.left = newLeft + 'px';\r\n        el.style.top = newTop + 'px';\r\n        \r\n        if (onDrag) {\r\n          onDrag({\r\n            x: newLeft,\r\n            y: newTop,\r\n            deltaX: currentViewportX - anyWP._dragState.startX,\r\n            deltaY: currentViewportY - anyWP._dragState.startY\r\n          });\r\n        }\r\n      }\r\n      else if (mouseType === 'mouseup' && anyWP._dragState && anyWP._dragState.element === el) {\r\n        console.log('[AnyWP] [Drag] END');\r\n        \r\n        const finalRect = el.getBoundingClientRect();\r\n        const finalPos = {\r\n          x: finalRect.left,\r\n          y: finalRect.top\r\n        };\r\n        \r\n        if (persistKey) {\r\n          Storage.saveElementPosition(anyWP, persistKey, finalPos.x, finalPos.y);\r\n        }\r\n        \r\n        if (onDragEnd) {\r\n          onDragEnd(finalPos);\r\n        }\r\n        \r\n        Debug.log('Drag end at: ' + finalPos.x + ',' + finalPos.y, true);\r\n        \r\n        anyWP._dragState = null;\r\n      }\r\n      else if (mouseType === 'mousedown' && !isOver) {\r\n        // Mouse down but not over element\r\n      }\r\n      else if (mouseType === 'mousemove' && anyWP._dragState && anyWP._dragState.element !== el) {\r\n        console.log('[AnyWP] [makeDraggable] mousemove but wrong element');\r\n      }\r\n    }\r\n    \r\n    window.addEventListener('AnyWP:mouse', handleGlobalMouse);\r\n    \r\n    el.__anyWP_dragHandler = {\r\n      handleGlobalMouse: handleGlobalMouse\r\n    };\r\n    \r\n    Debug.log('Element made draggable (via mouse hook): ' + (el.id || el.className));\r\n  },\r\n  \r\n  // Remove draggable functionality\r\n  removeDraggable(anyWP, element) {\r\n    let el = element;\r\n    if (typeof element === 'string') {\r\n      el = document.querySelector(element);\r\n    }\r\n    \r\n    if (!el) {\r\n      console.error('[AnyWP] Element not found:', element);\r\n      return;\r\n    }\r\n    \r\n    if (el.__anyWP_dragHandler) {\r\n      window.removeEventListener('AnyWP:mouse', el.__anyWP_dragHandler.handleGlobalMouse);\r\n      delete el.__anyWP_dragHandler;\r\n    }\r\n    \r\n    anyWP._draggableElements = anyWP._draggableElements.filter(function(d) {\r\n      return d.element !== el;\r\n    });\r\n    \r\n    el.style.cursor = '';\r\n    el.style.userSelect = '';\r\n    \r\n    Debug.log('Removed draggable from element: ' + (el.id || el.className));\r\n  },\r\n  \r\n  // Reset element position\r\n  resetPosition(anyWP, element, position) {\r\n    let el = element;\r\n    if (typeof element === 'string') {\r\n      el = document.querySelector(element);\r\n    }\r\n    \r\n    if (!el) {\r\n      console.error('[AnyWP] Element not found:', element);\r\n      return false;\r\n    }\r\n    \r\n    const draggableData = anyWP._draggableElements.find(function(d) {\r\n      return d.element === el;\r\n    });\r\n    \r\n    if (position) {\r\n      el.style.left = position.left + 'px';\r\n      el.style.top = position.top + 'px';\r\n    } else {\r\n      el.style.left = '';\r\n      el.style.top = '';\r\n    }\r\n    \r\n    if (draggableData && draggableData.persistKey) {\r\n      const key = draggableData.persistKey;\r\n      \r\n      delete anyWP._persistedState[key];\r\n      \r\n      if (window.chrome && window.chrome.webview) {\r\n        window.chrome.webview.postMessage({\r\n          type: 'saveState',\r\n          key: key,\r\n          value: position ? JSON.stringify(position) : ''\r\n        });\r\n      } else {\r\n        try {\r\n          if (position) {\r\n            localStorage.setItem('AnyWP_' + key, JSON.stringify(position));\r\n          } else {\r\n            localStorage.removeItem('AnyWP_' + key);\r\n          }\r\n        } catch (e) {\r\n          console.warn('[AnyWP] Failed to reset position:', e);\r\n        }\r\n      }\r\n      \r\n      console.log('[AnyWP] Reset position for ' + key);\r\n    }\r\n    \r\n    return true;\r\n  }\r\n};\r\n\r\n","// AnyWP Engine SDK - Main Entry Point\r\n// Modular architecture with build support\r\n\r\nimport { AnyWP } from './core/AnyWP.js';\r\nimport { initializeAnyWP } from './core/init.js';\r\nimport { Debug } from './utils/debug.js';\r\nimport { Events } from './modules/events.js';\r\nimport { ClickHandler } from './modules/click.js';\r\nimport { DragHandler } from './modules/drag.js';\r\nimport { Storage } from './modules/storage.js';\r\nimport { SPA } from './modules/spa.js';\r\n\r\n// Implement initialization\r\nAnyWP._init = function() {\r\n  initializeAnyWP(this);\r\n};\r\n\r\n// Public API: Debug\r\nAnyWP.enableDebug = function() {\r\n  Debug.enable();\r\n};\r\n\r\n// Public API: Click Handler\r\nAnyWP.onClick = function(element, callback, options) {\r\n  ClickHandler.onClick(this, element, callback, options);\r\n};\r\n\r\nAnyWP.refreshBounds = function() {\r\n  return ClickHandler.refreshBounds(this);\r\n};\r\n\r\nAnyWP.clearHandlers = function() {\r\n  ClickHandler.clearHandlers(this);\r\n};\r\n\r\n// Public API: Drag Handler\r\nAnyWP.makeDraggable = function(element, options) {\r\n  DragHandler.makeDraggable(this, element, options);\r\n};\r\n\r\nAnyWP.removeDraggable = function(element) {\r\n  DragHandler.removeDraggable(this, element);\r\n};\r\n\r\nAnyWP.resetPosition = function(element, position) {\r\n  return DragHandler.resetPosition(this, element, position);\r\n};\r\n\r\n// Public API: Storage\r\nAnyWP.saveState = function(key, value) {\r\n  Storage.save(this, key, value);\r\n};\r\n\r\nAnyWP.loadState = function(key, callback) {\r\n  Storage.load(this, key, callback);\r\n};\r\n\r\nAnyWP.clearState = function() {\r\n  Storage.clear(this);\r\n};\r\n\r\n// Public API: Events\r\nAnyWP.onMouse = function(callback) {\r\n  Events.onMouse(this, callback);\r\n};\r\n\r\nAnyWP.onKeyboard = function(callback) {\r\n  Events.onKeyboard(this, callback);\r\n};\r\n\r\nAnyWP.onVisibilityChange = function(callback) {\r\n  Events.onVisibilityChange(this, callback);\r\n};\r\n\r\nAnyWP._notifyVisibilityChange = function(visible) {\r\n  Events.notifyVisibilityChange(this, visible);\r\n};\r\n\r\n// Public API: SPA\r\nAnyWP.setSPAMode = function(enabled) {\r\n  SPA.setSPAMode(this, ClickHandler, enabled);\r\n};\r\n\r\n// Public API: Utility\r\nAnyWP.openURL = function(url) {\r\n  Debug.log('Opening URL: ' + url);\r\n  \r\n  if (window.chrome && window.chrome.webview) {\r\n    window.chrome.webview.postMessage({\r\n      type: 'openURL',\r\n      url: url\r\n    });\r\n  } else {\r\n    console.warn('[AnyWP] Native bridge not available');\r\n    window.open(url, '_blank');\r\n  }\r\n};\r\n\r\nAnyWP.ready = function(name) {\r\n  Debug.log('Wallpaper ready: ' + name, true);\r\n  \r\n  if (window.chrome && window.chrome.webview) {\r\n    window.chrome.webview.postMessage({\r\n      type: 'ready',\r\n      name: name\r\n    });\r\n  }\r\n};\r\n\r\n// Export for build\r\nexport { AnyWP };\r\n\r\n// Auto-initialize when DOM is ready\r\nif (typeof window !== 'undefined') {\r\n  window.AnyWP = AnyWP;\r\n  \r\n  if (document.readyState === 'loading') {\r\n    document.addEventListener('DOMContentLoaded', function() {\r\n      AnyWP._init();\r\n    });\r\n  } else {\r\n    AnyWP._init();\r\n  }\r\n  \r\n  console.log('[AnyWP] SDK loaded successfully');\r\n}\r\n\r\n","// Initialization module\r\nimport { Debug } from '../utils/debug.js';\r\nimport { Events } from '../modules/events.js';\r\nimport { SPA } from '../modules/spa.js';\r\nimport { ClickHandler } from '../modules/click.js';\r\nimport { Animations } from '../modules/animations.js';\r\n\r\nexport function initializeAnyWP(anyWP) {\r\n  console.log('========================================');\r\n  console.log('AnyWP Engine v' + anyWP.version + ' (SPA Compatible)');\r\n  console.log('========================================');\r\n  console.log('Screen: ' + anyWP.screenWidth + 'x' + anyWP.screenHeight);\r\n  console.log('DPI Scale: ' + anyWP.dpiScale + 'x');\r\n  console.log('Interaction Enabled: ' + anyWP.interactionEnabled);\r\n  console.log('========================================');\r\n  \r\n  Debug.detectFromURL();\r\n  SPA.detect(anyWP, ClickHandler);\r\n  Events.setup(anyWP, ClickHandler, Animations);\r\n  \r\n  // Enable debug mode automatically for testing\r\n  anyWP._debugMode = true;\r\n  console.log('[AnyWP] Debug mode ENABLED automatically');\r\n}\r\n\r\n"],"names":["AnyWP","version","dpiScale","window","devicePixelRatio","screenWidth","screen","width","screenHeight","height","interactionEnabled","_debugMode","_clickHandlers","_mouseCallbacks","_keyboardCallbacks","_visibilityCallback","_mutationObserver","_resizeObserver","_spaMode","_autoRefreshEnabled","_draggableElements","_dragState","_persistedState","_init","Error","Debug","enabled","enable","this","console","log","message","forceLog","showBorder","bounds","element","oldBorder","_anywpDebugBorder","parentNode","removeChild","border","document","createElement","className","style","cssText","left","top","body","appendChild","detectFromURL","URLSearchParams","location","search","has","Events","setup","anyWP","clickHandler","animationsHandler","addEventListener","event","forEach","cb","detail","handleClick","x","y","visible","resume","pause","setTimeout","refreshBounds","onMouse","callback","push","onKeyboard","onVisibilityChange","notifyVisibilityChange","e","error","CustomEvent","dispatchEvent","Bounds","calculate","rect","getBoundingClientRect","Math","round","right","bottom","isInBounds","isMouseOverElement","mouseX","mouseY","physicalLeft","physicalTop","physicalRight","physicalBottom","SPA","detect","self","isReact","React","ReactDOM","isVue","isAngular","framework","setupMonitoring","isReactDOM","querySelector","isVueDOM","isAngularDOM","setSPAMode","teardownMonitoring","originalPushState","history","pushState","originalReplaceState","replaceState","apply","arguments","onRouteChange","MutationObserver","mutations","shouldRefresh","mutation","type","handler","target","contains","observe","childList","subtree","attributes","attributeFilter","disconnect","selector","autoRefresh","newElement","refreshElementBounds","resizeObserver","ResizeObserver","ClickHandler","i","length","id","waitForElement","maxWait","startTime","Date","now","check","onClick","options","immediate","waitFor","undefined","delay","registerElement","el","existingIndex","findIndex","h","splice","handlerData","debug","isConnected","newBounds","refreshed","clearHandlers","Animations","__anyWP_animationsPaused","videos","querySelectorAll","video","paused","__anyWP_wasPlaying","warn","audios","audio","pauseStyle","getElementById","textContent","head","__anyWP_originalRAF","requestAnimationFrame","__anyWP_originalCancelRAF","cancelAnimationFrame","remove","play","catch","Storage","load","key","chrome","webview","removeEventListener","value","JSON","parse","postMessage","stored","localStorage","getItem","save","stringify","setItem","clear","Object","keys","startsWith","removeItem","saveElementPosition","position","msg","DragHandler","makeDraggable","persistKey","onDragStart","onDrag","onDragEnd","savedPos","draggableData","handleGlobalMouse","mouseType","dpi","windowLeft","screenX","windowTop","screenY","docRect","documentElement","viewportMouseX","viewportMouseY","elementLeft","elementTop","elementRight","elementBottom","isOver","elementId","toFixed","statusEl","innerHTML","color","data","startX","startY","offsetX","offsetY","initialLeft","initialTop","docLeft","docTop","currentViewportX","currentViewportY","newLeft","newTop","max","min","offsetWidth","offsetHeight","deltaX","deltaY","finalRect","finalPos","getComputedStyle","cursor","userSelect","webkitUserSelect","mozUserSelect","msUserSelect","draggable","ondragstart","preventDefault","onselectstart","__anyWP_dragHandler","removeDraggable","filter","d","resetPosition","find","enableDebug","saveState","loadState","clearState","_notifyVisibilityChange","openURL","url","open","ready","name","readyState"],"mappings":"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"}