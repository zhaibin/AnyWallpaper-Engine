# å¦‚ä½•ä½¿ç”¨æ‹–æ‹½åŠŸèƒ½

## ğŸ¯ å¿«é€Ÿå¼€å§‹ï¼ˆ3 æ­¥ï¼‰

### ç¬¬1æ­¥ï¼šåœ¨ HTML ä¸­åŠ è½½ SDK

åœ¨ä½ çš„ HTML æ–‡ä»¶çš„ `<head>` éƒ¨åˆ†æ·»åŠ ï¼š

```html
<script src="../windows/anywp_sdk.js"></script>
```

### ç¬¬2æ­¥ï¼šä½¿å…ƒç´ å¯æ‹–æ‹½

```javascript
AnyWP.makeDraggable('#myElement', {
  persistKey: 'myElement_position'  // ä½ç½®ä¼šè‡ªåŠ¨ä¿å­˜
});
```

### ç¬¬3æ­¥ï¼šå¯åŠ¨å£çº¸

åœ¨ Flutter åº”ç”¨ä¸­ï¼š
1. è¾“å…¥ä½ çš„ HTML æ–‡ä»¶è·¯å¾„
2. **ä¿æŒ "Enable Mouse Transparency" å‹¾é€‰**
3. ç‚¹å‡» "Start"
4. æ‹–åŠ¨å…ƒç´ å³å¯ï¼

## ğŸ“‹ å®Œæ•´ç¤ºä¾‹

```html
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>æˆ‘çš„æ‹–æ‹½å£çº¸</title>
  
  <!-- 1. åŠ è½½ SDK -->
  <script src="../windows/anywp_sdk.js"></script>
  
  <style>
    #widget {
      position: absolute;
      left: 100px;
      top: 100px;
      width: 200px;
      height: 150px;
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      border-radius: 15px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 20px;
    }
  </style>
</head>
<body>
  <div id="widget">æ‹–åŠ¨æˆ‘</div>

  <script>
    // 2. ç­‰å¾… SDK åŠ è½½
    function init() {
      if (window.AnyWP) {
        console.log('SDK ç‰ˆæœ¬:', AnyWP.version);
        
        // 3. è®¾ç½®æ‹–æ‹½
        AnyWP.makeDraggable('#widget', {
          persistKey: 'widget_position',  // ä½ç½®è‡ªåŠ¨ä¿å­˜
          onDragStart: function(pos) {
            console.log('å¼€å§‹æ‹–æ‹½', pos);
          },
          onDragEnd: function(pos) {
            console.log('æ‹–æ‹½ç»“æŸ', pos);
          }
        });
        
        console.log('æ‹–æ‹½å·²è®¾ç½®ï¼');
      } else {
        setTimeout(init, 100);
      }
    }
    
    init();
  </script>
</body>
</html>
```

## ğŸ¨ é«˜çº§åŠŸèƒ½

### è¾¹ç•Œé™åˆ¶

```javascript
AnyWP.makeDraggable('#element', {
  persistKey: 'element_pos',
  bounds: {
    left: 0,
    top: 0,
    right: 1920,   // å±å¹•å®½åº¦
    bottom: 1080   // å±å¹•é«˜åº¦
  }
});
```

### æ‹–æ‹½å›è°ƒ

```javascript
AnyWP.makeDraggable('#element', {
  persistKey: 'element_pos',
  onDragStart: function(pos) {
    // æ‹–æ‹½å¼€å§‹æ—¶
    document.getElementById('element').style.opacity = 0.8;
  },
  onDrag: function(pos) {
    // æ‹–æ‹½è¿‡ç¨‹ä¸­ï¼ˆæ¯æ¬¡ç§»åŠ¨éƒ½ä¼šè°ƒç”¨ï¼‰
    console.log('å½“å‰ä½ç½®:', pos.x, pos.y);
  },
  onDragEnd: function(pos) {
    // æ‹–æ‹½ç»“æŸæ—¶
    document.getElementById('element').style.opacity = 1;
    console.log('æœ€ç»ˆä½ç½®:', pos.x, pos.y);
  }
});
```

### è‡ªå®šä¹‰çŠ¶æ€ä¿å­˜

```javascript
// ä¿å­˜ä»»æ„æ•°æ®
const settings = {
  theme: 'dark',
  volume: 0.8,
  notifications: true
};
AnyWP.saveState('app_settings', JSON.stringify(settings));

// åŠ è½½æ•°æ®
AnyWP.loadState('app_settings', function(value) {
  if (value) {
    const settings = JSON.parse(value);
    applySettings(settings);
  }
});
```

## ğŸ§ª æµ‹è¯•æ­¥éª¤

### 1. ä½¿ç”¨æµ‹è¯•é¡µé¢

```
file:///E:/Projects/AnyWallpaper/AnyWallpaper-Engine/examples/test_drag_auto.html
```

### 2. æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Š

å¯åŠ¨åç­‰å¾… 3 ç§’ï¼Œåº”è¯¥æ˜¾ç¤ºï¼š
- âœ… SDK åŠ è½½çŠ¶æ€: SUCCESS
- âœ… SDK ç‰ˆæœ¬: 4.2.0
- âœ… makeDraggable: EXISTS

### 3. æµ‹è¯•æ‹–æ‹½

æ‹–åŠ¨é»„è‰²è¾¹æ¡†æ–¹å—ï¼Œåº”è¯¥ï¼š
- æ–¹å—è·Ÿéšé¼ æ ‡ç§»åŠ¨
- æ¾å¼€åæ˜¾ç¤º "ä¿å­˜æˆåŠŸ"
- åœæ­¢å¹¶é‡æ–°å¯åŠ¨ï¼Œæ–¹å—æ¢å¤åˆ°ä¸Šæ¬¡ä½ç½®

## âš ï¸ å¸¸è§é—®é¢˜

### Q: SDK æœªåŠ è½½ï¼ˆwindow.AnyWP ä¸å­˜åœ¨ï¼‰

**è§£å†³**ï¼šæ£€æŸ¥ HTML æ˜¯å¦åŒ…å«ï¼š
```html
<script src="../windows/anywp_sdk.js"></script>
```

### Q: æ‹–æ‹½ä¸å·¥ä½œ

**æ£€æŸ¥æ¸…å•**ï¼š
1. âœ… SDK å·²åŠ è½½ï¼Ÿï¼ˆ`window.AnyWP` å­˜åœ¨ï¼‰
2. âœ… SDK ç‰ˆæœ¬æ­£ç¡®ï¼Ÿï¼ˆ`AnyWP.version` æ˜¯ `4.2.0`ï¼‰
3. âœ… `makeDraggable` æ–¹æ³•å­˜åœ¨ï¼Ÿ
4. âœ… äº¤äº’æ¨¡å¼å¯ç”¨ï¼Ÿï¼ˆ`AnyWP.interactionEnabled = true`ï¼‰

### Q: ä½ç½®æ²¡æœ‰ä¿å­˜

**æ£€æŸ¥**ï¼š
1. æ˜¯å¦è®¾ç½®äº† `persistKey` å‚æ•°ï¼Ÿ
2. æŸ¥çœ‹æ³¨å†Œè¡¨ï¼š`HKEY_CURRENT_USER\Software\AnyWPEngine\State`
3. æ§åˆ¶å°æ˜¯å¦æ˜¾ç¤º "[AnyWP] [State] Saved to registry"ï¼Ÿ

## ğŸ“š ç›¸å…³æ–‡æ¡£

- **SDK åŠ è½½è¯¦è§£**: `docs/SDK_LOADING.md`
- **æ¶æ„è®¾è®¡**: `docs/DRAG_ARCHITECTURE.md`
- **è°ƒè¯•æŒ‡å—**: `examples/DEBUG_DRAG.md`
- **API å‚è€ƒ**: `docs/API_BRIDGE.md`
- **åŠŸèƒ½æ€»ç»“**: `docs/DRAG_FEATURE_SUMMARY.md`

## ğŸ‰ å¼€å§‹ä½¿ç”¨

1. å¤åˆ¶ä¸Šé¢çš„"å®Œæ•´ç¤ºä¾‹"ä»£ç 
2. ä¿å­˜ä¸º `.html` æ–‡ä»¶
3. åœ¨ Flutter åº”ç”¨ä¸­åŠ è½½
4. äº«å—æ‹–æ‹½åŠŸèƒ½ï¼

