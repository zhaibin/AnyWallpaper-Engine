# AnyWP Engine - è„šæœ¬è¯´æ˜

æ‰€æœ‰è„šæœ¬å·²ä¼˜åŒ–ï¼Œæ”¯æŒä¸­æ–‡è¾“å‡ºï¼ˆUTF-8 ç¼–ç ï¼‰ã€‚

---

## ğŸ“‹ è„šæœ¬æ¸…å•

### ğŸ”¨ å¼€å‘è„šæœ¬

#### `build_and_run.bat` â­ æ¨è
**ç”¨é€”**: æ„å»ºå¹¶è¿è¡Œç¤ºä¾‹åº”ç”¨ï¼ˆæ—¥å¸¸å¼€å‘æœ€å¸¸ç”¨ï¼‰  
**åŠŸèƒ½**:
- è‡ªåŠ¨æ£€æŸ¥å¹¶å®‰è£… WebView2 SDK
- æ„å»º Debug ç‰ˆæœ¬
- å¯åŠ¨åº”ç”¨

**ä½¿ç”¨**:
```bash
.\scripts\build_and_run.bat
```

**é€‚ç”¨åœºæ™¯**: æ—¥å¸¸å¼€å‘æµ‹è¯•

---

#### `test.bat` â­ æ¨è
**ç”¨é€”**: å¿«é€Ÿæµ‹è¯•ï¼ˆæ— éœ€é‡æ–°æ„å»ºï¼‰  
**åŠŸèƒ½**:
- è‡ªåŠ¨æ£€æµ‹å·²ç¼–è¯‘ç‰ˆæœ¬ï¼ˆä¼˜å…ˆ Releaseï¼Œå…¶æ¬¡ Debugï¼‰
- ç›´æ¥è¿è¡Œï¼ŒèŠ‚çœæ—¶é—´

**ä½¿ç”¨**:
```bash
.\scripts\test.bat
```

**é€‚ç”¨åœºæ™¯**: å¿«é€ŸéªŒè¯åŠŸèƒ½ï¼Œä»£ç æœªæ”¹åŠ¨æ—¶

---

#### `test_draggable.bat`
**ç”¨é€”**: æ‹–æ‹½åŠŸèƒ½ä¸“é¡¹æµ‹è¯•  
**åŠŸèƒ½**:
- åŠ è½½æ‹–æ‹½æµ‹è¯•é¡µé¢
- éªŒè¯æ‹–æ‹½APIå’ŒçŠ¶æ€æŒä¹…åŒ–

**ä½¿ç”¨**:
```bash
.\scripts\test_draggable.bat
```

**é€‚ç”¨åœºæ™¯**: æµ‹è¯•æ‹–æ‹½åŠŸèƒ½

---

### ğŸ› è°ƒè¯•è„šæœ¬

#### `debug_run.bat` â­ æ¨è
**ç”¨é€”**: è°ƒè¯•æ¨¡å¼è¿è¡Œï¼Œæ•è·æ‰€æœ‰æ—¥å¿—åˆ°æ–‡ä»¶  
**åŠŸèƒ½**:
- åœæ­¢å·²æœ‰è¿›ç¨‹
- è¿è¡Œå¹¶è¾“å‡ºæ—¥å¿—åˆ° `debug_run.log`
- æ–¹ä¾¿é—®é¢˜æ’æŸ¥

**ä½¿ç”¨**:
```bash
.\scripts\debug_run.bat

# æŸ¥çœ‹æ—¥å¿—
Get-Content debug_run.log -Tail 50
```

**æ—¥å¿—ä½ç½®**: `debug_run.log`ï¼ˆé¡¹ç›®æ ¹ç›®å½•ï¼‰  
**é€‚ç”¨åœºæ™¯**: é—®é¢˜æ’æŸ¥ã€åŠŸèƒ½è°ƒè¯•

---

#### `monitor_log.bat`
**ç”¨é€”**: å®æ—¶ç›‘æ§æ—¥å¿—è¾“å‡º  
**åŠŸèƒ½**:
- æ¯ 2 ç§’åˆ·æ–°æ˜¾ç¤ºæœ€æ–° 50 è¡Œæ—¥å¿—
- è‡ªåŠ¨æ£€æµ‹æ—¥å¿—æ–‡ä»¶ï¼ˆdebug_run.log æˆ– example/test_output.logï¼‰

**ä½¿ç”¨**:
```bash
.\scripts\monitor_log.bat

# æŒ‰ Ctrl+C åœæ­¢
```

**é€‚ç”¨åœºæ™¯**: å®æ—¶è§‚å¯Ÿæ—¥å¿—å˜åŒ–

---

### ğŸ“¦ å‘å¸ƒè„šæœ¬

#### `build_release_v2.bat` â­ å‘ç‰ˆå¿…ç”¨
**ç”¨é€”**: æ„å»ºå¯å‘å¸ƒçš„é¢„ç¼–è¯‘ DLL åŒ…  
**åŠŸèƒ½**:
- æ¸…ç†æ—§æ„å»º
- ç¼–è¯‘ Release ç‰ˆæœ¬
- å¤åˆ¶ DLLã€å¤´æ–‡ä»¶ã€Dart æºç ã€JavaScript SDK
- å¤åˆ¶æ–‡æ¡£ï¼ˆREADME, CHANGELOG, LICENSEï¼‰
- æ‰“åŒ…æˆ ZIP
- **è‡ªåŠ¨åˆ›å»º Web SDK ç‹¬ç«‹åŒ…**

**ä½¿ç”¨**:
```bash
.\scripts\build_release_v2.bat
```

**äº§ç‰©**:
- `release/anywp_engine_v{ç‰ˆæœ¬å·}/` - Flutteræ’ä»¶åŒ…ç›®å½•
- `release/anywp_engine_v{ç‰ˆæœ¬å·}.zip` - Flutteræ’ä»¶å‹ç¼©åŒ…ï¼ˆ~16 MBï¼‰
- `release/anywp_web_sdk_v{ç‰ˆæœ¬å·}.zip` - Web SDKç‹¬ç«‹åŒ…ï¼ˆ~56 KBï¼‰

**é€‚ç”¨åœºæ™¯**: å‡†å¤‡å‘å¸ƒæ–°ç‰ˆæœ¬

---

#### `build_sdk.bat`
**ç”¨é€”**: æ„å»º Web SDKï¼ˆTypeScript â†’ JavaScriptï¼‰  
**åŠŸèƒ½**:
- ä» `windows/sdk/` TypeScript æºç æ„å»º
- ç”Ÿæˆ `windows/anywp_sdk.js`

**ä½¿ç”¨**:
```bash
.\scripts\build_sdk.bat
```

**é€‚ç”¨åœºæ™¯**: ä¿®æ”¹ Web SDK åé‡æ–°æ„å»º

---

#### `build_web_sdk.ps1`
**ç”¨é€”**: åˆ›å»º Web SDK ç‹¬ç«‹å‘å¸ƒåŒ…  
**åŠŸèƒ½**:
- æ‰“åŒ… SDK æ–‡ä»¶ + ç¤ºä¾‹ + æ–‡æ¡£
- ç”Ÿæˆç‹¬ç«‹ ZIP åŒ…ä¾› Web å¼€å‘è€…ä½¿ç”¨

**ä½¿ç”¨**:
```powershell
.\scripts\build_web_sdk.ps1 -Version "1.x.x"
```

**äº§ç‰©**:
- `release/anywp_web_sdk_v{ç‰ˆæœ¬å·}.zip`

**é€‚ç”¨åœºæ™¯**: å•ç‹¬å‘å¸ƒ Web SDK

**æ³¨æ„**: é€šå¸¸ç”± `build_release_v2.bat` è‡ªåŠ¨è°ƒç”¨ï¼Œæ— éœ€æ‰‹åŠ¨è¿è¡Œ

---

### ğŸ§ª æµ‹è¯•è„šæœ¬

#### `comprehensive_auto_test.bat` â­ ä¸»æµ‹è¯•è„šæœ¬
**ç”¨é€”**: å…¨é“¾è·¯è‡ªåŠ¨åŒ–æµ‹è¯•ï¼ˆæ€§èƒ½ç›‘æ§ + åŠŸèƒ½æµ‹è¯•ï¼‰  
**åŠŸèƒ½**:
- è‡ªåŠ¨ç¼–è¯‘åº”ç”¨
- è¿è¡Œæ‰€æœ‰æµ‹è¯•é¡µé¢ï¼ˆ8ä¸ªï¼Œçº¦95ç§’ï¼‰
- å®æ—¶ç›‘æ§å†…å­˜å’ŒCPUï¼ˆCSVæ ¼å¼ï¼‰
- è‡ªåŠ¨æ”¶é›†æ—¥å¿—
- ç”Ÿæˆè¯¦ç»†æµ‹è¯•æŠ¥å‘Š
- æ”¯æŒé”å±æµ‹è¯•ï¼ˆå¯é€‰ï¼‰

**ä½¿ç”¨**:
```bash
# æ ‡å‡†æµ‹è¯•
.\scripts\comprehensive_auto_test.bat

# åŒ…å«é”å±æµ‹è¯•
.\scripts\comprehensive_auto_test.bat --with-lock-screen
```

**äº§ç‰©**: 
- `test_logs/comprehensive_test_*.log` - æµ‹è¯•æŠ¥å‘Š
- `test_logs/memory_*.csv` - å†…å­˜ç›‘æ§æ•°æ®
- `test_logs/cpu_*.csv` - CPUç›‘æ§æ•°æ®
- `test_logs/build_*.log` - ç¼–è¯‘æ—¥å¿—
- `test_logs/app_output_*.log` - åº”ç”¨æ—¥å¿—

**é€‚ç”¨åœºæ™¯**: å®Œæ•´åŠŸèƒ½éªŒè¯ã€æ€§èƒ½æµ‹è¯•

---

#### `run_comprehensive_test.bat` â­ ä¸€é”®æµ‹è¯•
**ç”¨é€”**: ä¸€é”®å¯åŠ¨æµ‹è¯• + è‡ªåŠ¨åˆ†æ  
**åŠŸèƒ½**:
- è¿è¡Œ `comprehensive_auto_test.bat`
- è‡ªåŠ¨è°ƒç”¨ `analyze_test_results.ps1` åˆ†æç»“æœ
- å¯é€‰ç”Ÿæˆ HTML æŠ¥å‘Š

**ä½¿ç”¨**:
```bash
# æ ‡å‡†æµ‹è¯•
.\scripts\run_comprehensive_test.bat

# åŒ…å«é”å±æµ‹è¯•
.\scripts\run_comprehensive_test.bat --lock
```

**é€‚ç”¨åœºæ™¯**: æœ€æ–¹ä¾¿çš„æµ‹è¯•æ–¹å¼ï¼Œæ¨èä½¿ç”¨

---

#### `analyze_test_results.ps1`
**ç”¨é€”**: åˆ†ææµ‹è¯•ç»“æœå¹¶ç”ŸæˆæŠ¥å‘Š  
**åŠŸèƒ½**:
- è§£æå†…å­˜å’ŒCPUæ•°æ®
- è®¡ç®—æ€§èƒ½æŒ‡æ ‡
- æ£€æµ‹å†…å­˜æ³„æ¼
- æ€§èƒ½è¯„åˆ†ï¼ˆ0-100åˆ†ï¼‰
- ç”ŸæˆHTMLå¯è§†åŒ–æŠ¥å‘Š

**ä½¿ç”¨**:
```powershell
# å‘½ä»¤è¡Œåˆ†æ
.\scripts\analyze_test_results.ps1

# ç”ŸæˆHTMLæŠ¥å‘Š
.\scripts\analyze_test_results.ps1 -GenerateHTML
```

**äº§ç‰©**:
- `test_logs/performance_report_*.html` - HTMLæŠ¥å‘Š

**é€‚ç”¨åœºæ™¯**: æ·±å…¥åˆ†ææµ‹è¯•ç»“æœ

---

#### `verify_optimizations.bat`
**ç”¨é€”**: é™æ€éªŒè¯ä¼˜åŒ–åŠŸèƒ½å®ç°  
**åŠŸèƒ½**:
- æ£€æŸ¥æ¨¡å—æ–‡ä»¶æ˜¯å¦å­˜åœ¨
- éªŒè¯é”™è¯¯å¤„ç†å®ç°ï¼ˆtry-catchï¼‰
- æ£€æŸ¥Loggerå¢å¼º
- éªŒè¯æ–‡æ¡£æ›´æ–°

**ä½¿ç”¨**:
```bash
.\scripts\verify_optimizations.bat
```

**é€‚ç”¨åœºæ™¯**: CI/CD é™æ€æ£€æŸ¥ã€ä»£ç å®¡æŸ¥

---

### âš™ï¸ å®‰è£…è„šæœ¬

#### `setup_webview2.bat` â­ é¦–æ¬¡å¿…ç”¨
**ç”¨é€”**: å®‰è£… WebView2 SDK  
**åŠŸèƒ½**:
- ä¸‹è½½ NuGetï¼ˆå¦‚æœªå®‰è£…ï¼‰
- å®‰è£… Microsoft.Web.WebView2 v1.0.2592.51
- å®‰è£…åˆ° `windows/packages/`

**ä½¿ç”¨**:
```bash
.\scripts\setup_webview2.bat
```

**é€‚ç”¨åœºæ™¯**: 
- é¦–æ¬¡å¼€å‘
- SDK æ–‡ä»¶ä¸¢å¤±
- é‡æ–°å®‰è£…ä¾èµ–

---

## ğŸ¯ ä½¿ç”¨å»ºè®®

### æ—¥å¸¸å¼€å‘æµç¨‹

```bash
# 1. é¦–æ¬¡è¿è¡Œï¼ˆå®‰è£… SDKï¼‰
.\scripts\setup_webview2.bat

# 2. å¼€å‘æµ‹è¯•ï¼ˆæœ€å¸¸ç”¨ï¼‰
.\scripts\build_and_run.bat

# 3. å¿«é€Ÿæµ‹è¯•ï¼ˆä»£ç æœªæ”¹åŠ¨ï¼‰
.\scripts\test.bat

# 4. è°ƒè¯•é—®é¢˜ï¼ˆéœ€è¦æ—¥å¿—ï¼‰
.\scripts\debug_run.bat
```

### Web SDK å¼€å‘æµç¨‹

```bash
# 1. ä¿®æ”¹ TypeScript æºç ï¼ˆwindows/sdk/ï¼‰

# 2. æ„å»º SDK
.\scripts\build_sdk.bat

# 3. æµ‹è¯• SDK
.\scripts\test.bat
```

### æµ‹è¯•æµç¨‹

```bash
# 1. å…¨é“¾è·¯æµ‹è¯•ï¼ˆæ¨èï¼‰
.\scripts\run_comprehensive_test.bat

# 2. æŸ¥çœ‹ HTML æŠ¥å‘Š
# æµè§ˆå™¨ä¼šè‡ªåŠ¨æ‰“å¼€ test_logs/performance_report_*.html

# 3. é™æ€éªŒè¯ï¼ˆå¯é€‰ï¼‰
.\scripts\verify_optimizations.bat
```

### å‘å¸ƒæµç¨‹

```bash
# 1. æ„å»ºå‘å¸ƒåŒ…ï¼ˆè‡ªåŠ¨åŒ…å« Web SDKï¼‰
.\scripts\build_release_v2.bat

# 2. éªŒè¯å‘å¸ƒåŒ…
# æ£€æŸ¥ release/anywp_engine_v{ç‰ˆæœ¬å·}/ ç›®å½•
# æ£€æŸ¥ release/anywp_web_sdk_v{ç‰ˆæœ¬å·}.zip æ–‡ä»¶

# 3. æ¨é€åˆ° GitHub
git push origin main

# 4. åˆ›å»º Git tag
git tag -a v{ç‰ˆæœ¬å·} -m "æè¿°"
git push origin v{ç‰ˆæœ¬å·}

# 5. åˆ›å»º GitHub Release
# ä¸Šä¼  anywp_engine_v{ç‰ˆæœ¬å·}.zip
# ä¸Šä¼  anywp_web_sdk_v{ç‰ˆæœ¬å·}.zip
```

---

## âœ… è„šæœ¬ç‰¹æ€§

### ä¸­æ–‡æ”¯æŒ
æ‰€æœ‰è„šæœ¬éƒ½ä½¿ç”¨ `chcp 65001` å¯ç”¨ UTF-8 ç¼–ç ï¼Œå®Œç¾æ”¯æŒä¸­æ–‡ã€‚

### é”™è¯¯å¤„ç†
- æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
- éªŒè¯æ„å»ºç»“æœ
- æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯

### ç”¨æˆ·å‹å¥½
- æ¸…æ™°çš„è¿›åº¦æç¤º
- è¯¦ç»†çš„ä½¿ç”¨è¯´æ˜
- å‹å¥½çš„é”™è¯¯æç¤º

---

## ğŸ—‘ï¸ å·²åˆ é™¤çš„è„šæœ¬ï¼ˆv1.3.2 æ¸…ç†ï¼‰

**é‡å¤åŠŸèƒ½**:
- âŒ `run.bat` - ä¸ `test.bat` åŠŸèƒ½é‡å 
- âŒ `test_optimizations.bat` - ä¸ `verify_optimizations.bat` é‡å¤
- âŒ `comprehensive_test.bat` - è¢« `comprehensive_auto_test.bat` å–ä»£

**è¿‡æ—¶åŠŸèƒ½**:
- âŒ `test_refactoring.bat` - é‡æ„å®Œæˆåä¸å†éœ€è¦
- âŒ `run_auto_test.bat` - åºŸå¼ƒçš„åŒ…è£…å™¨
- âŒ `auto_test.py` - ç¡¬ç¼–ç è·¯å¾„ï¼Œå·²è¢«ç»¼åˆæµ‹è¯•å–ä»£
- âŒ `automated_test.ps1` - åŠŸèƒ½ä¸å®Œæ•´

**å†å²åˆ é™¤**:
- âŒ `build_release.bat` - æ—§ç‰ˆå‘å¸ƒè„šæœ¬ï¼ˆä¸ v2 é‡å¤ï¼‰
- âŒ `PUSH_TO_GITHUB.bat` - GitHub æ¨é€è„šæœ¬ï¼ˆä¸­æ–‡ç¼–ç é—®é¢˜ï¼Œæ”¹ç”¨ç›´æ¥ `git push`ï¼‰

---

## ğŸ“Š è„šæœ¬ç»Ÿè®¡

**æ€»æ•°**: 13 ä¸ª

**åˆ†ç±»**:
- å¼€å‘è„šæœ¬: 3 ä¸ª
- è°ƒè¯•è„šæœ¬: 2 ä¸ª
- å‘å¸ƒè„šæœ¬: 3 ä¸ª
- æµ‹è¯•è„šæœ¬: 4 ä¸ª
- å®‰è£…è„šæœ¬: 1 ä¸ª

**æ¨èè„šæœ¬** (â­):
- `build_and_run.bat` - æ—¥å¸¸å¼€å‘
- `test.bat` - å¿«é€Ÿæµ‹è¯•
- `debug_run.bat` - é—®é¢˜è°ƒè¯•
- `build_release_v2.bat` - å‘å¸ƒæ„å»º
- `setup_webview2.bat` - é¦–æ¬¡å®‰è£…
- `run_comprehensive_test.bat` - å…¨é“¾è·¯æµ‹è¯•
- `comprehensive_auto_test.bat` - ä¸»æµ‹è¯•è„šæœ¬

---

**æ‰€æœ‰è„šæœ¬å‡å·²æµ‹è¯•ï¼Œæ— è¯­æ³•é”™è¯¯ï¼Œæ”¯æŒä¸­æ–‡ã€‚** âœ…  
**æœ€åæ›´æ–°**: 2025-11-08 (v1.3.2 è„šæœ¬æ¸…ç†)
