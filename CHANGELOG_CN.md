# æ›´æ–°æ—¥å¿—

æ‰€æœ‰é‡è¦çš„é¡¹ç›®å˜æ›´éƒ½å°†è®°å½•åœ¨æ­¤æ–‡ä»¶ä¸­ã€‚

## [4.1.0] - 2025-11-05 - ğŸš€ çœç”µä¼˜åŒ–ä¸å³æ—¶æ¢å¤

### âœ¨ æ ¸å¿ƒæ”¹è¿›

#### è½»é‡çº§æš‚åœç­–ç•¥
- **å³æ—¶æ¢å¤**ï¼šä» 500-1000ms ä¼˜åŒ–åˆ° **<50ms** âš¡
- **çŠ¶æ€ä¿ç•™**ï¼šDOM å®Œå…¨ä¿ç•™ï¼Œæ— éœ€é‡æ–°åŠ è½½
- **WebView2 ä¼˜åŒ–**ï¼šä½¿ç”¨ `put_IsVisible(FALSE)` è€Œééšè—çª—å£
- **ç”¨æˆ·ä½“éªŒ**ï¼šè§£é”åå£çº¸ç«‹å³æ˜¾ç¤ºï¼Œä»¿ä½›ä»æœªæš‚åœ

#### çœç”µæ•ˆæœ
- âœ… WebView2 å®Œå…¨åœæ­¢æ¸²æŸ“ï¼ˆèŠ‚çœ 90% CPU/GPUï¼‰
- âœ… è‡ªåŠ¨æš‚åœæ‰€æœ‰è§†é¢‘å’ŒéŸ³é¢‘
- âœ… è½»é‡å†…å­˜ç®¡ç†ï¼ˆä»…å¢åŠ  10-20MBï¼‰
- âœ… Page Visibility API é›†æˆ

### ğŸ†• æ–°å¢ API

#### JavaScript SDK (v4.1.0)
```javascript
// ç›‘å¬å¯è§æ€§å˜åŒ–
AnyWP.onVisibilityChange(function(visible) {
  if (visible) {
    console.log('æ¢å¤ - ç»§ç»­åŠ¨ç”»');
    resumeAnimations();
  } else {
    console.log('æš‚åœ - çœç”µæ¨¡å¼');
    pauseAnimations();
  }
});
```

**è‡ªåŠ¨è¡Œä¸º**ï¼š
- SDK è‡ªåŠ¨æš‚åœæ‰€æœ‰ `<video>` å…ƒç´ 
- SDK è‡ªåŠ¨æš‚åœæ‰€æœ‰ `<audio>` å…ƒç´ 
- æ¢å¤æ—¶è‡ªåŠ¨æ’­æ”¾ä¹‹å‰çš„åª’ä½“

#### Dart API
```dart
// é…ç½® API
await AnyWPEngine.setIdleTimeout(600);      // è®¾ç½®ç©ºé—²è¶…æ—¶ï¼ˆç§’ï¼‰
await AnyWPEngine.setMemoryThreshold(200);  // è®¾ç½®å†…å­˜é˜ˆå€¼ï¼ˆMBï¼‰
await AnyWPEngine.setCleanupInterval(30);   // è®¾ç½®æ¸…ç†é—´éš”ï¼ˆåˆ†é’Ÿï¼‰

// è·å–é…ç½®
Map<String, dynamic> config = await AnyWPEngine.getConfiguration();

// å›è°ƒ API
AnyWPEngine.setOnPowerStateChangeCallback((old, newState) {
  print('çŠ¶æ€å˜åŒ–: $old -> $newState');
});
```

### ğŸ“š æ–‡æ¡£æ›´æ–°

#### æ–°å¢æ–‡æ¡£
- **[DEVELOPER_API_REFERENCE.md](docs/DEVELOPER_API_REFERENCE.md)** - å®Œæ•´ API å‚è€ƒ
- **[API_USAGE_EXAMPLES.md](docs/API_USAGE_EXAMPLES.md)** - 7ä¸ªå®ç”¨ç¤ºä¾‹
- **[BEST_PRACTICES.md](docs/BEST_PRACTICES.md)** - æœ€ä½³å®è·µæŒ‡å—
- **[docs/README.md](docs/README.md)** - æ–‡æ¡£ç´¢å¼•

#### æ–°å¢ç¤ºä¾‹
- `examples/test_visibility.html` - å¯è§æ€§ API æµ‹è¯•é¡µé¢

### ğŸ¯ æ€§èƒ½å¯¹æ¯”

| æŒ‡æ ‡ | v4.0.0 | v4.1.0 | æ”¹è¿› |
|-----|--------|--------|------|
| æ¢å¤é€Ÿåº¦ | 500-1000ms | **<50ms** | **20å€æå‡** âš¡ |
| æš‚åœåå†…å­˜ | -50MB | -10MB | æ›´å°‘æ¸…ç†å¼€é”€ |
| ç”¨æˆ·ä½“éªŒ | æ˜æ˜¾å»¶è¿Ÿ | å‡ ä¹ç¬é—´ | âœ… ä¼˜ç§€ |
| çœç”µæ•ˆæœ | 90% | 90% | ç›¸åŒ |
| çŠ¶æ€ä¿ç•™ | éƒ¨åˆ† | å®Œå…¨ | âœ… æ›´å¥½ |

### ğŸ’¡ æŠ€æœ¯äº®ç‚¹

#### æ™ºèƒ½æš‚åœæœºåˆ¶
```cpp
// æš‚åœï¼šåœæ­¢æ¸²æŸ“ä½†ä¿ç•™çŠ¶æ€
webview_controller->put_IsVisible(FALSE);
NotifyWebContentVisibility(false);
SetProcessWorkingSetSize(...);  // è½»é‡ trim

// æ¢å¤ï¼šç¬é—´æ¢å¤æ¸²æŸ“
webview_controller->put_IsVisible(TRUE);
NotifyWebContentVisibility(true);
// å®Œæˆï¼<50ms
```

#### Page Visibility API é›†æˆ
- å‘é€æ ‡å‡† `visibilitychange` äº‹ä»¶
- å‘é€è‡ªå®šä¹‰ `AnyWP:visibility` äº‹ä»¶
- ç½‘é¡µå¯ä¼˜é›…å¤„ç†æš‚åœ/æ¢å¤

### ğŸ¨ ç”¨æˆ·ä½“éªŒæå‡

**è§£é”åœºæ™¯**ï¼š
1. ç”¨æˆ·æŒ‰ Win+L é”å±
2. å£çº¸ç«‹å³åœæ­¢æ¸²æŸ“ï¼ˆçœç”µ 90%ï¼‰
3. çŠ¶æ€å®Œå…¨ä¿ç•™åœ¨å†…å­˜ä¸­
4. ç”¨æˆ·è§£é”
5. **å£çº¸ç¬é—´æ¢å¤**ï¼ˆ<50msï¼‰âš¡
6. è§†é¢‘ä»æš‚åœå¤„ç»§ç»­æ’­æ”¾
7. åŠ¨ç”»æµç•…è¿‡æ¸¡

**å¯¹æ¯” v4.0.0**ï¼š
- âŒ æ—§ç‰ˆï¼šè§£é”åé»‘å± â†’ ç­‰å¾…åŠ è½½ â†’ å£çº¸é‡æ–°å‡ºç°
- âœ… æ–°ç‰ˆï¼šè§£é”åå£çº¸ç«‹å³æ˜¾ç¤ºï¼Œå®Œå…¨æ— æ„ŸçŸ¥

### ğŸ”„ å‘åå…¼å®¹
- å®Œå…¨å…¼å®¹ v4.0.0 API
- æ—§ä»£ç æ— éœ€ä¿®æ”¹
- è‡ªåŠ¨äº«å—æ€§èƒ½æå‡
- `onVisibilityChange` ä¸ºå¯é€‰ API

---

## [4.0.0] - 2025-11-03 - ğŸ‰ é‡å¤§æ›´æ–°ï¼šReact/Vue SPA å®Œæ•´æ”¯æŒ

### âœ¨ æ–°å¢åŠŸèƒ½
- **SPA æ¡†æ¶è‡ªåŠ¨æ£€æµ‹**ï¼šè‡ªåŠ¨è¯†åˆ« Reactã€Vueã€Angular åº”ç”¨
- **æ™ºèƒ½è·¯ç”±ç›‘å¬**ï¼šè‡ªåŠ¨ç›‘å¬ pushState/replaceState/popstate äº‹ä»¶
- **DOM å˜åŒ–ç›‘å¬**ï¼šä½¿ç”¨ MutationObserver è‡ªåŠ¨æ£€æµ‹åŠ¨æ€å†…å®¹å˜åŒ–
- **å…ƒç´ è‡ªåŠ¨é‡æ–°æŒ‚è½½**ï¼šSPA è·¯ç”±åˆ‡æ¢åè‡ªåŠ¨é‡æ–°ç»‘å®šç‚¹å‡»åŒºåŸŸ
- **ResizeObserver é›†æˆ**ï¼šè‡ªåŠ¨è·Ÿè¸ªå…ƒç´ å°ºå¯¸å’Œä½ç½®å˜åŒ–
- **ç­‰å¾…å…ƒç´ å‡ºç°**ï¼š`waitFor` é€‰é¡¹æ”¯æŒå¼‚æ­¥åŠ è½½çš„åŠ¨æ€å…ƒç´ 
- **æ‰‹åŠ¨è¾¹ç•Œåˆ·æ–°**ï¼šæä¾› `refreshBounds()` API æ‰‹åŠ¨åˆ·æ–°æ‰€æœ‰ç‚¹å‡»åŒºåŸŸ
- **å¤„ç†å™¨æ¸…ç†**ï¼šæä¾› `clearHandlers()` API æ¸…ç†æ‰€æœ‰æ³¨å†Œçš„ç‚¹å‡»å¤„ç†å™¨
- **React/Vue ç”Ÿå‘½å‘¨æœŸè¾…åŠ©**ï¼š`useReactEffect()` å’Œ `vueLifecycle()` è¾…åŠ©å‡½æ•°

### ğŸ”§ API æ”¹è¿›
- `onClick()` æ–°å¢é€‰é¡¹ï¼š
  - `immediate`: ç«‹å³æ³¨å†Œï¼ˆä¸å»¶è¿Ÿï¼‰
  - `waitFor`: ç­‰å¾…å…ƒç´ å‡ºç°ï¼ˆé»˜è®¤ trueï¼‰
  - `maxWait`: æœ€å¤§ç­‰å¾…æ—¶é—´ï¼ˆé»˜è®¤ 10000msï¼‰
  - `autoRefresh`: è‡ªåŠ¨åˆ·æ–°è¾¹ç•Œï¼ˆé»˜è®¤ trueï¼‰
  - `delay`: è‡ªå®šä¹‰å»¶è¿Ÿæ—¶é—´ï¼ˆé»˜è®¤ 100msï¼‰
- ç§»é™¤ç¡¬ç¼–ç çš„ 2000ms å»¶è¿Ÿ
- æ”¯æŒè‡ªåŠ¨æ£€æµ‹å¹¶å¯ç”¨ SPA æ¨¡å¼
- æ”¯æŒæ‰‹åŠ¨å¯ç”¨/ç¦ç”¨ SPA æ¨¡å¼ï¼š`setSPAMode(enabled)`

### ğŸ“š æ–‡æ¡£
- æ–°å¢ **Web å¼€å‘è€…é›†æˆæŒ‡å—**ï¼ˆä¸­è‹±æ–‡ï¼‰
  - `docs/WEB_DEVELOPER_GUIDE_CN.md`
  - `docs/WEB_DEVELOPER_GUIDE.md`
- è¯¦ç»†çš„ React é›†æˆæœ€ä½³å®è·µ
- è¯¦ç»†çš„ Vue 2/3 é›†æˆæœ€ä½³å®è·µ
- SPA è·¯ç”±å¤„ç†æŒ‡å—
- æ€§èƒ½ä¼˜åŒ–å»ºè®®
- è°ƒè¯•æŠ€å·§å’Œå¸¸è§é—®é¢˜è§£ç­”

### ğŸ“ ç¤ºä¾‹
- æ–°å¢ `examples/test_react.html`ï¼šå®Œæ•´çš„ React é›†æˆç¤ºä¾‹
  - Counter ç»„ä»¶
  - å¯ç‚¹å‡»çš„å¡ç‰‡
  - äº‹ä»¶æ—¥å¿—
  - SPA æ¨¡å¼å±•ç¤º
- æ–°å¢ `examples/test_vue.html`ï¼šå®Œæ•´çš„ Vue 3 é›†æˆç¤ºä¾‹
  - å¤šæ ‡ç­¾é¡µåˆ‡æ¢
  - Todo List åº”ç”¨
  - Counter ç»„ä»¶
  - åŠ¨æ€å†…å®¹å¤„ç†

### ğŸ› ä¿®å¤
- ä¿®å¤ SPA è·¯ç”±åˆ‡æ¢åç‚¹å‡»åŒºåŸŸå¤±æ•ˆçš„é—®é¢˜
- ä¿®å¤åŠ¨æ€å†…å®¹åŠ è½½åç‚¹å‡»åŒºåŸŸä¸å‡†ç¡®çš„é—®é¢˜
- ä¿®å¤å…ƒç´ é‡æ–°æŒ‚è½½åç‚¹å‡»æ£€æµ‹å¤±è´¥çš„é—®é¢˜
- æ”¹è¿›è°ƒè¯•è¾¹æ¡†çš„æ›´æ–°å’Œæ¸…ç†é€»è¾‘

### âš¡ æ€§èƒ½ä¼˜åŒ–
- ä½¿ç”¨ ResizeObserver æ›¿ä»£å®šæ—¶è½®è¯¢
- ä¼˜åŒ– DOM å˜åŒ–ç›‘å¬ï¼Œåªåœ¨å¿…è¦æ—¶åˆ·æ–°
- è·¯ç”±åˆ‡æ¢åæ™ºèƒ½å»¶è¿Ÿåˆ·æ–°ï¼ˆ500msï¼‰
- å‡å°‘ä¸å¿…è¦çš„è¾¹ç•Œè®¡ç®—

### ğŸ”„ å‘åå…¼å®¹
- å®Œå…¨å‘åå…¼å®¹ v3.x API
- æ—§ä»£ç æ— éœ€ä¿®æ”¹å³å¯ç»§ç»­å·¥ä½œ
- æ–°åŠŸèƒ½é»˜è®¤å¯ç”¨ï¼Œå¯é€‰é€€å‡º

---

## [3.1.3] - 2025-11-01 - æ–‡æ¡£å¢å¼ºï¼šæ‰“åŒ…ä¸é›†æˆæŒ‡å—

### ğŸ“¦ æ–°å¢æ–‡æ¡£

#### æ–°å¢ï¼šå®Œæ•´çš„æ‰“åŒ…å’Œä½¿ç”¨æŒ‡å—

**æ–°å¢æ–‡ä»¶**:
1. **[QUICK_INTEGRATION.md](QUICK_INTEGRATION.md)** - 30ç§’å¿«é€Ÿé›†æˆæŒ‡å—
   - ä¸‰ç§é›†æˆæ–¹å¼ï¼ˆæœ¬åœ°è·¯å¾„ã€Gitã€pub.devï¼‰
   - å®Œæ•´ä»£ç ç¤ºä¾‹
   - å¸¸ç”¨åœºæ™¯é€ŸæŸ¥

2. **[docs/PACKAGE_USAGE_GUIDE_CN.md](docs/PACKAGE_USAGE_GUIDE_CN.md)** - è¯¦ç»†æ‰“åŒ…ä½¿ç”¨æ–‡æ¡£
   - ä¸‰ç§é›†æˆæ–¹å¼è¯¦ç»†å¯¹æ¯”
   - æœ¬åœ°è·¯å¾„å¼•ç”¨å®Œæ•´è¯´æ˜
   - Git ä»“åº“å¼•ç”¨å®Œæ•´æµç¨‹
   - pub.dev å‘å¸ƒè¯¦ç»†æ­¥éª¤
   - å®Œæ•´åŠŸèƒ½ç¤ºä¾‹ä»£ç 
   - API å‚è€ƒæ–‡æ¡£
   - æ•…éšœæ’é™¤æŒ‡å—

**æ›´æ–°æ–‡ä»¶**:
- **[README.md](README.md)** - æ·»åŠ é›†æˆæŒ‡å—é“¾æ¥

### âœ¨ ä¸»è¦å†…å®¹

#### 1. ä¸‰ç§é›†æˆæ–¹å¼

| æ–¹å¼ | é€‚ç”¨åœºæ™¯ | é…ç½®æ–¹æ³• |
|------|---------|---------|
| **æœ¬åœ°è·¯å¾„** | å¼€å‘æµ‹è¯• | `path: ../AnyWP_Engine` |
| **Git ä»“åº“** | å›¢é˜Ÿåä½œ | `git: url + ref` |
| **pub.dev** | ç”Ÿäº§ç¯å¢ƒ | `anywp_engine: ^1.0.0` |

#### 2. å®Œæ•´ä½¿ç”¨ç¤ºä¾‹

æä¾›äº†ä»¥ä¸‹ç¤ºä¾‹ä»£ç ï¼š
- æœ€å°åŒ–ç¤ºä¾‹ï¼ˆ10è¡Œä»£ç å¯åŠ¨å£çº¸ï¼‰
- å®Œæ•´åŠŸèƒ½ç¤ºä¾‹ï¼ˆå¸¦UIæ§åˆ¶å™¨ï¼‰
- å¸¸ç”¨åœºæ™¯ç¤ºä¾‹ï¼ˆé€æ˜ã€äº¤äº’ã€æœ¬åœ°æ–‡ä»¶ï¼‰

#### 3. API å®Œæ•´å‚è€ƒ

- `initializeWallpaper()` - è¯¦ç»†å‚æ•°è¯´æ˜
- `stopWallpaper()` - æ¸…ç†å’Œåœæ­¢
- `navigateToUrl()` - åŠ¨æ€å¯¼èˆª

#### 4. æ•…éšœæ’é™¤

- WebView2 Runtime å®‰è£…
- è·¯å¾„æ ¼å¼é—®é¢˜
- æƒé™é—®é¢˜
- è°ƒè¯•æŠ€å·§

---

## [3.1.2] - 2025-11-01 - å®‰å…¨å¢å¼ºä¸è°ƒè¯•ä¼˜åŒ–

### ğŸ”’ å®‰å…¨å¢å¼º

#### URL Blacklist System
- æ–°å¢ URL é»‘åå•åŠŸèƒ½ï¼Œé˜²æ­¢æ¶æ„ç½‘é¡µè®¿é—®æ•æ„Ÿç³»ç»Ÿè·¯å¾„
- é»˜è®¤å°ç¦ï¼š`file:///c:/windows`, `file:///c:/program files` åŠå­ç›®å½•

#### Security Logger
- æ–°å¢å®Œæ•´çš„å®‰å…¨æ—¥å¿—ç³»ç»Ÿï¼š
  - Navigation attempts
  - Permission requests (camera/microphone/location)
  - Content security policy violations
- æ‰€æœ‰å®‰å…¨äº‹ä»¶è‡ªåŠ¨è®°å½•åˆ°æ—¥å¿—

### ğŸ› Bug Fixes

#### Mouse Hook ç¨³å®šæ€§
- ä¿®å¤åœ¨å¤§å‹ç›‘è§†å™¨ï¼ˆ3840x2160ï¼‰ä¸Šçš„é¼ æ ‡é’©å­å´©æºƒ
- ä¿®å¤å¶å‘æ€§å†…å­˜æ³„æ¼å’Œè®¿é—®è¿ä¾‹
- å®Œå–„çº¿ç¨‹å®‰å…¨å¤„ç†

#### Resource Management
- æ–°å¢ ResourceTracker ç»Ÿä¸€ç®¡ç†æ‰€æœ‰çª—å£å¥æŸ„
- è‡ªåŠ¨æ¸…ç†æœªé‡Šæ”¾çš„èµ„æº
- æ”¹è¿›ææ„å‡½æ•°æ¸…ç†é€»è¾‘

### ğŸ”§ æ”¹è¿›

#### Navigation Safety
- æ‰€æœ‰ URL å¯¼èˆªå‰è¿›è¡Œé»‘åå•éªŒè¯
- æ‹’ç»è®¿é—®çš„ URL ä¼šå†™å…¥æ—¥å¿—å¹¶é€šçŸ¥ç”¨æˆ·
- æ”¯æŒå­è·¯å¾„åŒ¹é…ï¼ˆå¦‚ `/windows/system32`ï¼‰

#### Display Change Monitoring
- æ–°å¢æ˜¾ç¤ºå™¨å˜åŒ–ç›‘å¬å™¨
- æ”¯æŒåˆ†è¾¨ç‡å˜åŒ–ã€æ˜¾ç¤ºå™¨æ·»åŠ /ç§»é™¤ç­‰äº‹ä»¶
- Flutter ç«¯å¯æ³¨å†Œå›è°ƒå“åº”æ˜¾ç¤ºå™¨å˜åŒ–

### ğŸ“Š æ€§èƒ½

- ä¼˜åŒ–é¼ æ ‡é’©å­æ€§èƒ½ï¼ˆé¿å…é¢‘ç¹åæ ‡è½¬æ¢ï¼‰
- å‡å°‘ä¸å¿…è¦çš„æ—¥å¿—è¾“å‡ºï¼ˆéè°ƒè¯•æ¨¡å¼ï¼‰
- æ”¹è¿›çª—å£åˆ›å»ºå’Œé”€æ¯æµç¨‹

---

## [3.1.1] - 2025-10-31 - æœ€ç»ˆä¼˜åŒ–ï¼šæ— ç¼å£çº¸ä½“éªŒ

### âœ¨ é‡å¤§æ”¹è¿›

#### å®Œç¾çš„æ¡Œé¢é›†æˆ
- **æ™ºèƒ½ Z-Order æ’åº**ï¼šå£çº¸çª—å£è‡ªåŠ¨å®šä½åˆ°æ¡Œé¢å›¾æ ‡æ­£ä¸‹æ–¹
  - å®šä½åˆ° `SHELLDLL_DefView` å’Œ `WorkerW` ä¹‹é—´
  - ä½¿ç”¨ `SWP_NOSENDCHANGING | SWP_NOACTIVATE` é¿å…é—ªçƒ
  - è‡ªåŠ¨é‡è¯•æœºåˆ¶ç¡®ä¿æˆåŠŸ

#### é¼ æ ‡ç‚¹å‡»ç©¿é€ä¼˜åŒ–
- **æ™ºèƒ½ç‚¹å‡»åŒºåŸŸç®¡ç†**ï¼š
  - æ¡Œé¢å›¾æ ‡åŒºåŸŸå®Œå…¨å¯ç‚¹å‡»ï¼ˆå¯ç”¨ç©¿é€ï¼‰
  - ç½‘é¡µäº’åŠ¨åŒºåŸŸç²¾ç¡®å“åº”ï¼ˆç¦ç”¨ç©¿é€ï¼‰
  - è‡ªåŠ¨æ ¹æ®ç‚¹å‡»åæ ‡åŠ¨æ€åˆ‡æ¢
- **æ€§èƒ½ä¼˜åŒ–**ï¼š
  - ä½¿ç”¨ä½çº§é¼ æ ‡é’©å­ï¼ˆ`WH_MOUSE_LL`ï¼‰
  - æœ€å°åŒ–æ€§èƒ½å¼€é”€
  - ä»…åœ¨å¿…è¦æ—¶è°ƒç”¨ `SetWindowLongPtr`

#### çª—å£ç®¡ç†æ”¹è¿›
- **ç‹¬ç«‹å­çª—å£æ¶æ„**ï¼š
  - WebView2 æ‰˜ç®¡åœ¨ç‹¬ç«‹å­çª—å£ä¸­
  - ä½¿ç”¨ `WS_CHILD | WS_VISIBLE` æ ·å¼
  - æ”¯æŒå¤šæ˜¾ç¤ºå™¨ï¼ˆæ¯ä¸ªæ˜¾ç¤ºå™¨ç‹¬ç«‹å­çª—å£ï¼‰
- **ç”Ÿå‘½å‘¨æœŸç®¡ç†**ï¼š
  - å®Œæ•´çš„åˆ›å»º/é”€æ¯æµç¨‹
  - èµ„æºè‡ªåŠ¨æ¸…ç†
  - å†…å­˜æ³„æ¼é˜²æŠ¤

### ğŸ”§ æŠ€æœ¯å®ç°

#### Mouse Hook System
```cpp
// å…¨å±€é¼ æ ‡é’©å­
static HHOOK mouseHook_;
// åŠ¨æ€çª—å£é€æ˜åº¦ç®¡ç†
LRESULT CALLBACK LowLevelMouseProc(...)
```

#### Z-Order Management
```cpp
// æ™ºèƒ½å®šä½ç®—æ³•
FindDesktopWindow()
SetWindowPos(..., HWND_BOTTOM - 1)
```

### ğŸ“ API ä¸å˜
- ä¿æŒ Flutter API å®Œå…¨å…¼å®¹
- æ— éœ€ä¿®æ”¹ç°æœ‰ä»£ç 
- æ— ç¼å‡çº§ä½“éªŒ

### ğŸ› å·²çŸ¥é—®é¢˜ä¿®å¤
- âœ… ä¿®å¤æ¡Œé¢å›¾æ ‡æ— æ³•ç‚¹å‡»ï¼ˆå®Œå…¨è§£å†³ï¼‰
- âœ… ä¿®å¤çª—å£ Z-order é”™è¯¯ï¼ˆå®Œå…¨è§£å†³ï¼‰
- âœ… ä¿®å¤èµ„æºæ³„æ¼é—®é¢˜
- âœ… ä¿®å¤å¤šæ˜¾ç¤ºå™¨æ”¯æŒ

---

## [3.1.0] - 2025-10-30 - å¤šæ˜¾ç¤ºå™¨æ”¯æŒ + å®Œæ•´ API

### ğŸ¨ æ–°å¢åŠŸèƒ½

#### ğŸ–¥ï¸ å®Œæ•´çš„å¤šæ˜¾ç¤ºå™¨æ”¯æŒ
- **æ˜¾ç¤ºå™¨æšä¸¾**ï¼š
  ```dart
  List<MonitorInfo> monitors = await AnyWPEngine.getMonitors();
  ```
- **ç‹¬ç«‹å£çº¸æ§åˆ¶**ï¼šæ¯ä¸ªæ˜¾ç¤ºå™¨å¯ä»¥æ˜¾ç¤ºä¸åŒçš„ç½‘é¡µå£çº¸
- **æ˜¾ç¤ºå™¨ä¿¡æ¯**ï¼š
  - ç´¢å¼•ã€åç§°ï¼ˆå¦‚ `\\.\DISPLAY1`ï¼‰
  - åˆ†è¾¨ç‡ï¼ˆå®½åº¦ x é«˜åº¦ï¼‰
  - ä½ç½®ï¼ˆx, y åæ ‡ï¼‰
  - æ˜¯å¦ä¸ºä¸»æ˜¾ç¤ºå™¨

#### ğŸ”„ çµæ´»çš„å£çº¸ç®¡ç†
- **å¤šæ˜¾ç¤ºå™¨æ¨¡å¼**ï¼š
  ```dart
  // åœ¨æ˜¾ç¤ºå™¨ 0 ä¸Šå¯åŠ¨å£çº¸
  await AnyWPEngine.initializeWallpaper(
    url: 'https://example.com',
    monitorIndex: 0,
  );
  
  // åœ¨æ˜¾ç¤ºå™¨ 1 ä¸Šå¯åŠ¨å¦ä¸€ä¸ªå£çº¸
  await AnyWPEngine.initializeWallpaper(
    url: 'https://another.com',
    monitorIndex: 1,
  );
  ```

- **å•ä¸€æ¨¡å¼ï¼ˆå‘åå…¼å®¹ï¼‰**ï¼š
  ```dart
  // ä¸æŒ‡å®š monitorIndexï¼Œä½¿ç”¨ä¸»æ˜¾ç¤ºå™¨
  await AnyWPEngine.initializeWallpaper(
    url: 'https://example.com',
  );
```

#### ğŸŒ ç‹¬ç«‹ URL å¯¼èˆª
- æ¯ä¸ªæ˜¾ç¤ºå™¨çš„å£çº¸å¯ç‹¬ç«‹å¯¼èˆªåˆ°ä¸åŒ URLï¼š
  ```dart
  await AnyWPEngine.navigateToUrl(
    url: 'https://newpage.com',
    monitorIndex: 0,
  );
  ```

### ğŸ”§ API æ”¹è¿›

#### æ–°å¢æ–¹æ³•
- `getMonitors()` â†’ `List<MonitorInfo>`
  - è¿”å›æ‰€æœ‰æ˜¾ç¤ºå™¨ä¿¡æ¯
  - åŒ…å«åˆ†è¾¨ç‡ã€ä½ç½®ã€æ˜¯å¦ä¸ºä¸»æ˜¾ç¤ºå™¨

#### å‚æ•°å¢å¼º
æ‰€æœ‰ä¸»è¦æ–¹æ³•æ–°å¢ `monitorIndex` å¯é€‰å‚æ•°ï¼š
- `initializeWallpaper(..., monitorIndex: int?)`
- `stopWallpaper(monitorIndex: int?)`
- `navigateToUrl(..., monitorIndex: int?)`

#### æ–°å¢æ•°æ®æ¨¡å‹
```dart
class MonitorInfo {
  final int index;
  final String name;
  final int width;
  final int height;
  final int x;
  final int y;
  final bool isPrimary;
}
```

### ğŸ“± ç¤ºä¾‹åº”ç”¨å‡çº§

#### æ–°å¢åŠŸèƒ½
- æ˜¾ç¤ºå™¨åˆ—è¡¨ UI
- æ¯ä¸ªæ˜¾ç¤ºå™¨ç‹¬ç«‹æ§åˆ¶é¢æ¿
- æ¯ä¸ªæ˜¾ç¤ºå™¨ç‹¬ç«‹ URL è¾“å…¥æ¡†
- "Start All" / "Stop All" æ‰¹é‡æ“ä½œ
- å®æ—¶æ˜¾ç¤ºå™¨çŠ¶æ€æŒ‡ç¤º

### ğŸ› Bug Fixes
- ä¿®å¤å¤šæ˜¾ç¤ºå™¨ç¯å¢ƒä¸‹åæ ‡è®¡ç®—é—®é¢˜
- ä¿®å¤æ˜¾ç¤ºå™¨ç´¢å¼•ä¸åŒ¹é…çš„é—®é¢˜
- æ”¹è¿›çª—å£å®šä½ç®—æ³•

### ğŸ“š æ–‡æ¡£æ›´æ–°
- æ‰€æœ‰æ–‡æ¡£æ›´æ–°ä¸ºå¤šæ˜¾ç¤ºå™¨ API
- æ–°å¢å¤šæ˜¾ç¤ºå™¨ä½¿ç”¨ç¤ºä¾‹
- API å‚è€ƒå®Œå…¨æ›´æ–°

---

## [3.0.0] - 2025-10-30 - API é‡æ„ + å¤šæ˜¾ç¤ºå™¨æ”¯æŒ

### ğŸš€ é‡å¤§å˜æ›´

#### API å®Œå…¨é‡æ„
**æ—§ç‰ˆ API (å¼ƒç”¨)**:
```dart
// âŒ å·²å¼ƒç”¨
await AnyWPEngine.startWallpaper(url);
await AnyWPEngine.setMouseTransparent(true);
```

**æ–°ç‰ˆ API**:
```dart
// âœ… æ¨èä½¿ç”¨
await AnyWPEngine.initializeWallpaper(
  url: url,
  isMouseTransparent: true,  // é»˜è®¤ true
);
```

#### å‘½åä¸€è‡´æ€§
- `startWallpaper` â†’ `initializeWallpaper`
- `setMouseTransparent` â†’ åˆå¹¶åˆ° `initializeWallpaper` å‚æ•°ä¸­
- å‚æ•°å…¨éƒ¨ä½¿ç”¨å‘½åå‚æ•°

### âœ¨ æ–°å¢åŠŸèƒ½

#### 1. å¤šæ˜¾ç¤ºå™¨æ”¯æŒï¼ˆåˆæ­¥ï¼‰
- C++ å±‚æ–°å¢æ˜¾ç¤ºå™¨æšä¸¾ API
- æ”¯æŒè·å–æ‰€æœ‰æ˜¾ç¤ºå™¨ä¿¡æ¯
- ä¸ºæ¯ä¸ªæ˜¾ç¤ºå™¨ç‹¬ç«‹åˆ›å»ºå£çº¸çª—å£

#### 2. ç®€åŒ–çš„åˆå§‹åŒ–æµç¨‹
```dart
// ä¸€è¡Œä»£ç å¯åŠ¨å£çº¸
await AnyWPEngine.initializeWallpaper(
  url: 'https://example.com',
  isMouseTransparent: true,
);
```

#### 3. æ›´å¥½çš„é”™è¯¯å¤„ç†
- æ‰€æœ‰æ–¹æ³•è¿”å›æ˜ç¡®çš„é”™è¯¯ä¿¡æ¯
- å‚æ•°éªŒè¯æ›´ä¸¥æ ¼

### ğŸ”§ å†…éƒ¨æ”¹è¿›

#### C++ æ¶æ„ä¼˜åŒ–
- é‡æ„ Plugin ç±»ï¼Œæ›´æ¸…æ™°çš„æ–¹æ³•å‘½å
- æ”¹è¿›æ˜¾ç¤ºå™¨ç®¡ç†é€»è¾‘
- ä¼˜åŒ–èµ„æºç®¡ç†å’Œæ¸…ç†

#### Flutter å±‚ä¼˜åŒ–
- ç®€åŒ– MethodChannel è°ƒç”¨
- ç»Ÿä¸€é”™è¯¯å¤„ç†é€»è¾‘
- æ”¹è¿›æ—¥å¿—è¾“å‡º

### ğŸ“š æ–‡æ¡£æ›´æ–°
- æ‰€æœ‰ç¤ºä¾‹ä»£ç æ›´æ–°ä¸ºæ–° API
- æ·»åŠ  API è¿ç§»æŒ‡å—
- å®Œå–„æ³¨é‡Šæ–‡æ¡£

### âš ï¸ Breaking Changes
- å¿…é¡»ä½¿ç”¨æ–°çš„ `initializeWallpaper` API
- `setMouseTransparent` ä¸å†ä½œä¸ºç‹¬ç«‹æ–¹æ³•
- æ‰€æœ‰å‚æ•°æ”¹ä¸ºå‘½åå‚æ•°

### ğŸ”„ å‘åå…¼å®¹
- æ—§ API æ ‡è®°ä¸º `@Deprecated` ä½†ä»å¯ä½¿ç”¨
- æä¾›è¯¦ç»†çš„è¿ç§»æŒ‡å—
- å»ºè®®åœ¨ v4.0.0 å‰å®Œæˆè¿ç§»

---

## [2.0.0] - 2025-10-29 - å®Œæ•´åŠŸèƒ½å®ç°

### âœ¨ æ ¸å¿ƒåŠŸèƒ½

#### WebView2 é›†æˆ
- å®Œæ•´çš„ WebView2 Runtime æ”¯æŒ
- å¼‚æ­¥åˆå§‹åŒ–æµç¨‹
- ç¯å¢ƒå¤ç”¨æœºåˆ¶

#### æ¡Œé¢å£çº¸æ¨¡å¼
- çª—å£å®šä½åˆ°æ¡Œé¢å›¾æ ‡åæ–¹
- æ”¯æŒé¼ æ ‡ç©¿é€ï¼ˆæ¡Œé¢å›¾æ ‡å¯ç‚¹å‡»ï¼‰
- æ”¯æŒäº¤äº’æ¨¡å¼ï¼ˆç½‘é¡µå¯äº¤äº’ï¼‰

#### JavaScript æ¡¥æ¥
- `anywp_sdk.js` è‡ªåŠ¨æ³¨å…¥
- ç‚¹å‡»äº‹ä»¶å¤„ç†
- URL æ‰“å¼€åŠŸèƒ½
- é¼ æ ‡/é”®ç›˜äº‹ä»¶æ”¯æŒ

### ğŸ¯ API

#### Dart API
```dart
await AnyWPEngine.startWallpaper(url);
await AnyWPEngine.stopWallpaper();
await AnyWPEngine.setMouseTransparent(true);
await AnyWPEngine.navigateToUrl(url);
```

#### JavaScript API
```javascript
AnyWP.ready('My Wallpaper');
AnyWP.onClick(element, callback);
AnyWP.openURL(url);
AnyWP.onMouse(callback);
AnyWP.onKeyboard(callback);
```

### ğŸ“± ç¤ºä¾‹åº”ç”¨
- å®Œæ•´çš„ UI æ§åˆ¶é¢æ¿
- URL è¾“å…¥å’Œå¯¼èˆª
- é¼ æ ‡æ¨¡å¼åˆ‡æ¢
- å¸¸ç”¨åœºæ™¯æŒ‰é’®

### ğŸ“ æµ‹è¯• HTML
- `test_simple.html` - åŸºç¡€åŠŸèƒ½
- `test_api.html` - å®Œæ•´ API æ¼”ç¤º
- `test_iframe_ads.html` - å¤æ‚åœºæ™¯æµ‹è¯•

---

## [1.0.0] - 2025-10-28 - åˆå§‹å‘å¸ƒ

### ğŸ‰ åˆå§‹åŠŸèƒ½
- Windows å¹³å°æ”¯æŒ
- åŸºç¡€çš„ WebView2 é›†æˆ
- ç®€å•çš„å£çº¸æ˜¾ç¤ºåŠŸèƒ½
- Flutter MethodChannel é€šä¿¡
