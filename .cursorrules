# AnyWP Engine - Cursor Rules

## é¡¹ç›®æ¦‚è§ˆ
Flutter Windows æ’ä»¶ï¼Œå°† WebView2 åµŒå…¥ä¸ºäº¤äº’å¼æ¡Œé¢å£çº¸ï¼ˆæ˜¾ç¤ºåœ¨æ¡Œé¢å›¾æ ‡åæ–¹ï¼‰ã€‚

**æŠ€æœ¯æ ˆ**: Flutter 3.0+ | C++17 | WebView2 | CMake | JavaScript  
**å‘½å**: åŒ…å `anywp_engine` | ç±»å `AnyWPEngine` `AnyWPEnginePlugin`  
**æ ¸å¿ƒåŠŸèƒ½**: å£çº¸åµŒå…¥ | é¼ æ ‡äº¤äº’ | å…ƒç´ æ‹–æ‹½ | åº”ç”¨çº§å­˜å‚¨éš”ç¦» | çœç”µä¼˜åŒ–

---

## ç¼–ç è§„èŒƒ

### Dart
- ç±» `UpperCamelCase` | æ–¹æ³• `lowerCamelCase` | æ–‡ä»¶ `snake_case.dart`
- å…¬å…± API éœ€æ–‡æ¡£æ³¨é‡Š | å¼‚æ­¥ç”¨ `Future<T>` | ä½¿ç”¨ `flutter_lints`

### C++
- ç±»/æ–¹æ³• `PascalCase` | æˆå‘˜å˜é‡ `snake_case_` | å¸¸é‡ `UPPER_SNAKE_CASE`
- ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆç®¡ç† COM | RAII ç®¡ç†èµ„æº | æ£€æŸ¥ Win32 API è¿”å›å€¼

### JavaScript
- å…¨å±€ `window.AnyWP` | æ–¹æ³• `lowerCamelCase`
- æ ¸å¿ƒ API: `makeDraggable()` `saveState()` `loadState()` `onClick()`

---

## æ–‡ä»¶ç»„ç»‡

```
lib/                    # Dart API
windows/                # C++ å®ç° + anywp_sdk.js
example/                # ç¤ºä¾‹åº”ç”¨
examples/               # æµ‹è¯• HTML (8ä¸ª)
docs/                   # æ ¸å¿ƒæ–‡æ¡£ (22ä¸ª)
scripts/                # æ„å»ºè„šæœ¬
release/                # å‘å¸ƒåŒ…
```

---

## æ ¸å¿ƒæ–‡æ¡£

### é¢å‘å¼€å‘è€…ï¼ˆå¿…è¯»ï¼‰
- **Flutter**: `docs/FOR_FLUTTER_DEVELOPERS.md` (å¯¼èˆª) + `docs/DEVELOPER_API_REFERENCE.md` (API)
- **Web**: `docs/WEB_DEVELOPER_GUIDE_CN.md`
- **é›†æˆ**: `docs/PRECOMPILED_DLL_INTEGRATION.md`
- **å­˜å‚¨**: `README.md` å­˜å‚¨éš”ç¦»ç« èŠ‚ (v1.2.0+)

### æŠ€æœ¯æ–‡æ¡£
- `docs/TECHNICAL_NOTES.md` | `docs/API_BRIDGE.md` | `docs/INTEGRATION_ARCHITECTURE.md`

### ç”¨æˆ·æ–‡æ¡£
- `README.md` | `docs/QUICK_START.md` | `docs/TROUBLESHOOTING.md`

---

## å¼€å‘æµç¨‹

### åŠŸèƒ½å¼€å‘
1. å®ç°åŠŸèƒ½ + é”™è¯¯å¤„ç†
2. è¿è¡Œæµ‹è¯•éªŒè¯ï¼ˆ`.\scripts\test.bat`ï¼‰
3. è‡ªåŠ¨æäº¤ä»£ç 

### è°ƒè¯•æµç¨‹
1. ç¼–è¯‘è¿è¡Œï¼š`.\scripts\debug_run.bat`
2. æŸ¥çœ‹æ—¥å¿—ï¼š`debug_run.log` æˆ– `example/test_output.log`
3. åˆ†æä¼˜åŒ–ï¼Œé‡å¤æµ‹è¯•

---

## æµ‹è¯•ã€ä¸Šçº¿ã€å‘ç‰ˆæµç¨‹ï¼ˆå¿…é¡»éµå®ˆï¼‰

### é˜¶æ®µ 1ï¸âƒ£ï¼šåŠŸèƒ½å¼€å‘ä¸æµ‹è¯•

#### 1.1 å¼€å‘é˜¶æ®µ
- [ ] å®ç°åŠŸèƒ½ä»£ç ï¼ˆDart + C++ + JavaScriptï¼‰
- [ ] æ·»åŠ å®Œæ•´çš„æ–‡æ¡£æ³¨é‡Š
- [ ] é”™è¯¯å¤„ç†å’Œè¾¹ç•Œæƒ…å†µ
- [ ] è‡ªåŠ¨æäº¤ä»£ç 

#### 1.2 ç¼–è¯‘æµ‹è¯•
```bash
cd example
flutter clean
flutter build windows --debug
```
- [ ] æ— ç¼–è¯‘é”™è¯¯
- [ ] æ—  Linter è­¦å‘Š
- [ ] DLL æ­£ç¡®ç”Ÿæˆ

#### 1.3 åŠŸèƒ½æµ‹è¯•
```bash
.\scripts\test.bat  # æˆ– debug_run.bat
```
**å¿…æµ‹é¡¹ç›®**:
- [ ] åŸºç¡€åŠŸèƒ½æ­£å¸¸ï¼ˆå¯åŠ¨/åœæ­¢å£çº¸ï¼‰
- [ ] æ–°åŠŸèƒ½å·¥ä½œæ­£å¸¸
- [ ] æ— å´©æºƒæˆ–å¼‚å¸¸
- [ ] å†…å­˜å ç”¨åˆç†ï¼ˆ< 300 MBï¼‰
- [ ] æµ‹è¯•è‡³å°‘ 2 ä¸ªæµ‹è¯•é¡µé¢ï¼ˆexamples/ï¼‰

#### 1.4 é›†æˆæµ‹è¯•
- [ ] å¤šæ˜¾ç¤ºå™¨æ”¯æŒï¼ˆå¦‚æœ‰å¤šæ˜¾ç¤ºå™¨ï¼‰
- [ ] æ‹–æ‹½åŠŸèƒ½ï¼ˆtest_draggable.htmlï¼‰
- [ ] çŠ¶æ€æŒä¹…åŒ–ï¼ˆæ‹–æ‹½ä½ç½®ä¿å­˜/åŠ è½½ï¼‰
- [ ] åº”ç”¨éš”ç¦»ï¼ˆæ£€æŸ¥å­˜å‚¨ç›®å½• `%LOCALAPPDATA%\AnyWPEngine\`ï¼‰

---

### é˜¶æ®µ 2ï¸âƒ£ï¼šæ–‡æ¡£æ›´æ–°ï¼ˆå‘å¸ƒå‰å¿…é¡»ï¼‰

#### 2.1 æ ¸å¿ƒæ–‡æ¡£åŒæ­¥
**æ–°å¢ API å¿…é¡»æ›´æ–°**:
- [ ] `README.md` - å¿«é€Ÿå¼€å§‹ç¤ºä¾‹
- [ ] `lib/anywp_engine.dart` - Dart æ–‡æ¡£æ³¨é‡Š
- [ ] `docs/DEVELOPER_API_REFERENCE.md` - API å‚è€ƒç« èŠ‚
- [ ] `docs/FOR_FLUTTER_DEVELOPERS.md` - API åˆ—è¡¨

**æ–°å¢åŠŸèƒ½å¿…é¡»æ›´æ–°**:
- [ ] `README.md` - Features ç« èŠ‚
- [ ] `CHANGELOG_CN.md` - æ–°å¢æ›´æ–°æ—¥å¿—æ¡ç›®

#### 2.2 ç¤ºä¾‹ä»£ç æ›´æ–°
- [ ] `README.md` å¿«é€Ÿå¼€å§‹ä»£ç å¯è¿è¡Œ
- [ ] `docs/DEVELOPER_API_REFERENCE.md` ç¤ºä¾‹ä»£ç å®Œæ•´
- [ ] ç‰ˆæœ¬æ ‡æ³¨æ¸…æ™°ï¼ˆå¦‚ `v1.2.0+`ï¼‰

#### 2.3 æ–‡æ¡£éªŒè¯
```bash
# éªŒè¯æ–° API æ˜¯å¦è¦†ç›–
grep -r "newAPIName" docs/ README.md lib/
```
- [ ] æ‰€æœ‰æ ¸å¿ƒæ–‡æ¡£åŒ…å«æ–°åŠŸèƒ½
- [ ] ç¤ºä¾‹ä»£ç å¯ç›´æ¥å¤åˆ¶ä½¿ç”¨
- [ ] æ— è¿‡æ—¶ä¿¡æ¯

---

### é˜¶æ®µ 3ï¸âƒ£ï¼šå‘å¸ƒå‡†å¤‡

#### 3.1 ç‰ˆæœ¬å·æ›´æ–°
**å¿…é¡»åŒæ­¥æ›´æ–°**:
- [ ] `pubspec.yaml` - version: `1.x.0`
- [ ] `scripts/build_release_v2.bat` - VERSION=`1.x.0`
- [ ] `CHANGELOG_CN.md` - æ·»åŠ æ–°ç‰ˆæœ¬æ¡ç›®
- [ ] `.cursorrules` åº•éƒ¨ç‰ˆæœ¬å·

#### 3.2 CHANGELOG å®Œæ•´æ€§
**å¿…é¡»åŒ…å«**:
- [ ] ç‰ˆæœ¬å·å’Œæ—¥æœŸï¼š`## [4.x.0] - YYYY-MM-DD - æ ‡é¢˜`
- [ ] æ–°å¢åŠŸèƒ½ï¼š`### âœ¨ æ–°å¢åŠŸèƒ½`
- [ ] é‡æ„æ”¹è¿›ï¼š`### ğŸ”„ é‡æ„æ”¹è¿›`ï¼ˆå¦‚æœ‰ï¼‰
- [ ] æ–‡æ¡£æ›´æ–°ï¼š`### ğŸ“š æ–‡æ¡£æ›´æ–°`
- [ ] ä½¿ç”¨ç¤ºä¾‹ï¼š`### ğŸ¯ ä½¿ç”¨ç¤ºä¾‹`
- [ ] æŠ€æœ¯ç»†èŠ‚ï¼š`### ğŸ”§ æŠ€æœ¯ç»†èŠ‚`ï¼ˆå¦‚æœ‰é‡å¤§æ”¹åŠ¨ï¼‰

#### 3.3 Release æ„å»º
```bash
.\scripts\build_release_v2.bat
```
- [ ] æ„å»ºæˆåŠŸæ— é”™è¯¯
- [ ] DLL æ–‡ä»¶ç”Ÿæˆï¼ˆ`release/anywp_engine_v{ç‰ˆæœ¬å·}/bin/`ï¼‰
- [ ] ç›®å½•ç»“æ„å®Œæ•´ï¼ˆbin, lib, include, sdk, windowsï¼‰
- [ ] æ–‡æ¡£æ–‡ä»¶é½å…¨ï¼ˆREADME, CHANGELOG, LICENSE, PRECOMPILED_README, pubspec.yamlï¼‰

#### 3.4 å‘å¸ƒåŒ…éªŒè¯
**å¿…é¡»æ£€æŸ¥**:
- [ ] `release/anywp_engine_v{ç‰ˆæœ¬å·}/README.md` åŒ…å«æ–°åŠŸèƒ½
- [ ] `release/anywp_engine_v{ç‰ˆæœ¬å·}/CHANGELOG_CN.md` åŒ…å«æ–°ç‰ˆæœ¬
- [ ] `release/anywp_engine_v{ç‰ˆæœ¬å·}/pubspec.yaml` ç‰ˆæœ¬å·æ­£ç¡®
- [ ] `release/anywp_engine_v{ç‰ˆæœ¬å·}/lib/dart/anywp_engine.dart` åŒ…å«æ–° API
- [ ] éªŒè¯æ–° API åœ¨å‘å¸ƒåŒ…æ–‡æ¡£ä¸­çš„è¦†ç›–åº¦

```bash
# éªŒè¯å‘½ä»¤
grep -r "newAPIName" release/anywp_engine_v{ç‰ˆæœ¬å·}/
```

#### 3.5 åˆ›å»º GitHub Release Notes
- [ ] å¤åˆ¶ `docs/RELEASE_TEMPLATE.md`
- [ ] ä¿®æ”¹ä¸º `release/GITHUB_RELEASE_NOTES_v{ç‰ˆæœ¬å·}.md`
- [ ] å¡«å†™å®Œæ•´çš„åŠŸèƒ½è¯´æ˜ã€ç¤ºä¾‹ã€æµ‹è¯•ç»“æœ
- [ ] åŒ…å«å‡çº§æŒ‡å—å’Œæ³¨æ„äº‹é¡¹

---

### é˜¶æ®µ 4ï¸âƒ£ï¼šGit æäº¤ä¸æ¨é€

#### 4.1 Git æäº¤
```bash
git add release/ CHANGELOG_CN.md pubspec.yaml docs/ README.md .cursorrules

# ä¸­æ–‡æäº¤ä¿¡æ¯ä½¿ç”¨æ–‡ä»¶æ–¹å¼ï¼ˆé¿å…ä¹±ç ï¼‰
write("commit_msg.txt", "release: å‘å¸ƒ v1.x.0 - åŠŸèƒ½æè¿°")
git commit -F commit_msg.txt
delete_file("commit_msg.txt")
```

**æ£€æŸ¥**:
- [ ] æ‰€æœ‰å‘å¸ƒç›¸å…³æ–‡ä»¶å·²æ·»åŠ 
- [ ] æäº¤ä¿¡æ¯æ¸…æ™°æè¿°ç‰ˆæœ¬å’ŒåŠŸèƒ½
- [ ] å·¥ä½œåŒºå¹²å‡€ï¼ˆ`git status` æ— æœªæäº¤ï¼‰

#### 4.2 æ¨é€åˆ° GitHub
```bash
# æ¨é€æ‰€æœ‰æäº¤
git push origin main
```

**æ³¨æ„**: 
- âŒ ä¸ä½¿ç”¨ `.\scripts\PUSH_TO_GITHUB.bat`ï¼ˆå·²åºŸå¼ƒï¼‰
- âœ… ç›´æ¥ä½¿ç”¨ `git push origin main`
- âš ï¸ ä¸­æ–‡æäº¤ä¿¡æ¯å·²é€šè¿‡ `-F commit_msg.txt` æ­£ç¡®å¤„ç†

**éªŒè¯**:
- [ ] æ¨é€æˆåŠŸæ— é”™è¯¯
- [ ] GitHub ç½‘é¡µå¯è§æœ€æ–°æäº¤

---

### é˜¶æ®µ 5ï¸âƒ£ï¼šGitHub Release å‘å¸ƒ

#### 5.1 åˆ›å»º Release
1. è®¿é—®: `https://github.com/zhaibin/AnyWallpaper-Engine/releases/new`
2. å¡«å†™ä¿¡æ¯:
   - **Tag**: `v{ç‰ˆæœ¬å·}` (ä¾‹å¦‚ v1.2.0)
   - **Target**: `main` branch
   - **Title**: `AnyWP Engine v{ç‰ˆæœ¬å·} - åŠŸèƒ½æè¿°`
   - **Description**: å¤åˆ¶ `release/GITHUB_RELEASE_NOTES_v{ç‰ˆæœ¬å·}.md` å†…å®¹
3. ä¸Šä¼ æ–‡ä»¶:
   - `release/anywp_engine_v{ç‰ˆæœ¬å·}.zip`
4. å‹¾é€‰ "Set as the latest release"
5. ç‚¹å‡» "Publish release"

#### 5.2 å‘å¸ƒåéªŒè¯
- [ ] Release é¡µé¢æ˜¾ç¤ºæ­£å¸¸
- [ ] ZIP æ–‡ä»¶å¯ä¸‹è½½
- [ ] å‘å¸ƒè¯´æ˜æ ¼å¼æ­£ç¡®
- [ ] æ ‡ç­¾åˆ›å»ºæˆåŠŸ

---

### é˜¶æ®µ 6ï¸âƒ£ï¼šå‘å¸ƒåæ¸…ç†ï¼ˆå¯é€‰ï¼‰

#### 6.1 æ¸…ç†ä¸´æ—¶æ–‡ä»¶
```bash
# æ¸…ç†æ„å»ºæ—¥å¿—
Remove-Item build_release.log -ErrorAction SilentlyContinue
Remove-Item example/test_output.log -ErrorAction SilentlyContinue
Remove-Item debug_run.log -ErrorAction SilentlyContinue
```

#### 6.2 é€šçŸ¥ç”¨æˆ·ï¼ˆå¯é€‰ï¼‰
- åœ¨ç›¸å…³ç¤¾åŒº/è®ºå›å‘å¸ƒæ›´æ–°é€šçŸ¥
- æ›´æ–° pub.dev åŒ…ï¼ˆå¦‚æœå‘å¸ƒåˆ° pub.devï¼‰

---

## æ–‡æ¡£å®Œæ•´æ€§æ£€æŸ¥æ¸…å•

### æ–°å¢ API å‘å¸ƒå‰æ£€æŸ¥

å½“æ–°å¢ä»»ä½• Dart API æ–¹æ³•æ—¶ï¼Œ**å¿…é¡»**åœ¨ä»¥ä¸‹æ–‡æ¡£ä¸­æ·»åŠ ï¼š

1. **Dart æºç æ–‡æ¡£**:
   - [ ] `lib/anywp_engine.dart` - å®Œæ•´æ–‡æ¡£æ³¨é‡Š
   - [ ] å‚æ•°è¯´æ˜ã€è¿”å›å€¼ã€ä½¿ç”¨ç¤ºä¾‹

2. **README.md**:
   - [ ] Quick Start ç¤ºä¾‹ä»£ç ä¸­ä½¿ç”¨ï¼ˆå¦‚é€‚ç”¨ï¼‰
   - [ ] æˆ–åœ¨ç›¸å…³ç« èŠ‚ä¸­è¯´æ˜

3. **API å‚è€ƒ**:
   - [ ] `docs/DEVELOPER_API_REFERENCE.md` - æ–°å¢ç« èŠ‚æˆ–æ›´æ–°ç°æœ‰ç« èŠ‚
   - [ ] å®Œæ•´çš„å‚æ•°è¯´æ˜ã€è¿”å›å€¼ã€ç¤ºä¾‹ä»£ç 

4. **å¼€å‘è€…å¯¼èˆª**:
   - [ ] `docs/FOR_FLUTTER_DEVELOPERS.md` - åœ¨ API åˆ—è¡¨ä¸­æ·»åŠ 
   - [ ] å¦‚æœ‰é‡å¤§åŠŸèƒ½ï¼Œæ·»åŠ å¿«é€Ÿä¸Šæ‰‹ç¤ºä¾‹

5. **CHANGELOG**:
   - [ ] `CHANGELOG_CN.md` - åœ¨æ–°ç‰ˆæœ¬æ¡ç›®ä¸­è¯´æ˜
   - [ ] åŒ…å«ä½¿ç”¨ç¤ºä¾‹

**éªŒè¯å‘½ä»¤**:
```bash
# æœç´¢æ–° API æ˜¯å¦åœ¨æ ¸å¿ƒæ–‡æ¡£ä¸­
grep -r "æ–°APIåç§°" README.md lib/ docs/DEVELOPER_API_REFERENCE.md docs/FOR_FLUTTER_DEVELOPERS.md
```

### æ–°å¢åŠŸèƒ½å‘å¸ƒå‰æ£€æŸ¥

å½“æ–°å¢é‡å¤§åŠŸèƒ½æ—¶ï¼Œ**å¿…é¡»**ï¼š

1. **README.md**:
   - [ ] Features ç« èŠ‚æ–°å¢æ¡ç›®
   - [ ] å¦‚éœ€è¦ï¼Œæ–°å¢ä¸“é¢˜ç« èŠ‚ï¼ˆå¦‚ Storage Isolationï¼‰
   - [ ] å¿«é€Ÿå¼€å§‹ç¤ºä¾‹æ›´æ–°ï¼ˆå¦‚é€‚ç”¨ï¼‰

2. **CHANGELOG_CN.md**:
   - [ ] è¯¦ç»†çš„åŠŸèƒ½è¯´æ˜
   - [ ] å®Œæ•´çš„ä½¿ç”¨ç¤ºä¾‹
   - [ ] ä¼˜åŠ¿å’ŒæŠ€æœ¯ç»†èŠ‚

3. **å‘å¸ƒåŒ…æ–‡æ¡£**:
   - [ ] æ›´æ–°åçš„ README.md å¤åˆ¶åˆ°å‘å¸ƒåŒ…
   - [ ] æ›´æ–°åçš„ CHANGELOG_CN.md å¤åˆ¶åˆ°å‘å¸ƒåŒ…

4. **æµ‹è¯•éªŒè¯**:
   - [ ] æ–°åŠŸèƒ½åœ¨ç¤ºä¾‹åº”ç”¨ä¸­å¯æ¼”ç¤º
   - [ ] ç›¸å…³æµ‹è¯•é¡µé¢å¯ç”¨ï¼ˆexamples/ï¼‰

---

## AI å·¥ä½œæµè§„èŒƒ

### åŸºæœ¬åŸåˆ™
- **é»˜è®¤ä¸­æ–‡å›å¤**ï¼ˆæŠ€æœ¯æœ¯è¯­ä¿ç•™è‹±æ–‡ï¼‰
- **ç›´æ¥å®ç°**ï¼Œé¿å…å†—é•¿è§£é‡Š
- **è‡ªåŠ¨è°ƒè¯•**ï¼šç¼–è¯‘ã€è¿è¡Œã€è¯»æ—¥å¿—ã€ä¼˜åŒ–
- **è‡ªåŠ¨æäº¤**ï¼šåŠŸèƒ½å®Œæˆåè‡ªåŠ¨ git commit
- **ä¸åˆ›å»ºè¿‡ç¨‹æ€§æ–‡æ¡£**ï¼ˆæµ‹è¯•æŠ¥å‘Šã€éªŒè¯æŠ¥å‘Šç­‰ï¼‰

### Git æäº¤è§„èŒƒ

**æäº¤ä¿¡æ¯æ ¼å¼**:
```
<type>(<scope>): <subject>

<body>
```

**Type**:
- `feat` - æ–°åŠŸèƒ½
- `fix` - Bug ä¿®å¤
- `docs` - æ–‡æ¡£æ›´æ–°
- `refactor` - é‡æ„
- `chore` - æ‚é¡¹ï¼ˆæ¸…ç†ã€é…ç½®ç­‰ï¼‰
- `release` - å‘å¸ƒç‰ˆæœ¬

**ä¸­æ–‡æäº¤ï¼ˆå¿…é¡»ä½¿ç”¨æ–‡ä»¶æ–¹å¼ï¼‰**:
```bash
write("commit_msg.txt", "feat: æ·»åŠ æ–°åŠŸèƒ½\n\nè¯¦ç»†è¯´æ˜...")
git commit -F commit_msg.txt
delete_file("commit_msg.txt")
```

**ç¦æ­¢**: `git commit -m "ä¸­æ–‡ä¿¡æ¯"` âŒ ä¼šä¹±ç 

### PowerShell æ³¨æ„äº‹é¡¹

**åŸºæœ¬è§„åˆ™**:
- **ç¦æ­¢** `&&` æ“ä½œç¬¦ï¼Œä½¿ç”¨ `;` åˆ†éš”å¤šå‘½ä»¤
- **ç¦æ­¢** åœ¨å•è¡Œä¸­ä½¿ç”¨å¤æ‚çš„è„šæœ¬å—ï¼ˆ`{ }` åµŒå¥—ï¼‰
- **ç¦æ­¢** åœ¨ä¸­æ–‡å­—ç¬¦ä¸²ä¸­ä½¿ç”¨ç‰¹æ®Šå­—ç¬¦ï¼ˆ`"`ã€`'`ã€`{}`ï¼‰

**å¸¸è§é—®é¢˜**:

1. **ä¸­æ–‡å­—ç¬¦ä¸²ä¸­çš„å¼•å·é—®é¢˜**
```powershell
# âŒ é”™è¯¯ï¼šä¸­æ–‡ä¸­åŒ…å«å¼•å·
Write-Host "å‘ç° $($_.Count) å¤„æ–° API å¼•ç”¨ âœ“"  # âœ“ ä¼šå¯¼è‡´è§£æé”™è¯¯

# âœ… æ­£ç¡®ï¼šé¿å…åœ¨ä¸­æ–‡ä¸­ä½¿ç”¨ç‰¹æ®Šç¬¦å·
Write-Host "å‘ç° $($_.Count) å¤„æ–° API å¼•ç”¨"
```

2. **å¤æ‚è„šæœ¬å—è§£æå¤±è´¥**
```powershell
# âŒ é”™è¯¯ï¼šå•è¡Œå¤šå±‚åµŒå¥—
foreach ($item in $list) { if ($x) { Write-Host "..." } }

# âœ… æ­£ç¡®ï¼šä½¿ç”¨ç®€å•å‘½ä»¤æˆ–æ‰¹å¤„ç†è„šæœ¬
Get-ChildItem | Where-Object Name -like "*.dll"
```

3. **è½¬ä¹‰å­—ç¬¦é—®é¢˜**
```powershell
# âŒ é”™è¯¯ï¼šæœªè½¬ä¹‰çš„ç‰¹æ®Šå­—ç¬¦
"åŒ…å« { æˆ– } çš„å­—ç¬¦ä¸²"

# âœ… æ­£ç¡®ï¼šé¿å…ä½¿ç”¨æˆ–æ­£ç¡®è½¬ä¹‰
"åŒ…å«èŠ±æ‹¬å·çš„å­—ç¬¦ä¸²"
```

**æ¨èåšæ³•**:
- âœ… ä¼˜å…ˆä½¿ç”¨æ‰¹å¤„ç†è„šæœ¬ï¼ˆ.batï¼‰å¤„ç†å¤æ‚é€»è¾‘
- âœ… PowerShell åªç”¨äºç®€å•å‘½ä»¤ï¼ˆGet-ChildItem, Test-Path, Copy-Itemï¼‰
- âœ… éªŒè¯æµç¨‹ä½¿ç”¨ grep å·¥å…·ä»£æ›¿ PowerShell è„šæœ¬

---

## å®Œæ•´å‘ç‰ˆæµç¨‹ï¼ˆä¸¥æ ¼éµå®ˆï¼‰

### ğŸ“‹ å‘ç‰ˆæ£€æŸ¥æ¸…å•

#### Step 1: ç‰ˆæœ¬å·æ›´æ–°
- [ ] `pubspec.yaml`: `version: 1.x.0`
- [ ] `scripts/build_release_v2.bat`: `VERSION=1.x.0`
- [ ] `.cursorrules` åº•éƒ¨: `ç‰ˆæœ¬: 1.x.0`

#### Step 2: CHANGELOG æ›´æ–°
- [ ] æ·»åŠ æ–°ç‰ˆæœ¬æ¡ç›®ï¼š`## [4.x.0] - YYYY-MM-DD - æ ‡é¢˜`
- [ ] âœ¨ æ–°å¢åŠŸèƒ½ï¼ˆè¯¦ç»†è¯´æ˜ + ç¤ºä¾‹ï¼‰
- [ ] ğŸ”„ é‡æ„æ”¹è¿›ï¼ˆå¦‚æœ‰ï¼‰
- [ ] ğŸ“š æ–‡æ¡£æ›´æ–°
- [ ] ğŸ¯ ä½¿ç”¨ç¤ºä¾‹
- [ ] ğŸ”§ æŠ€æœ¯ç»†èŠ‚ï¼ˆé‡å¤§æ”¹åŠ¨ï¼‰

#### Step 3: æ ¸å¿ƒæ–‡æ¡£åŒæ­¥
**æ–°å¢ API**:
- [ ] `lib/anywp_engine.dart` - æ–‡æ¡£æ³¨é‡Š
- [ ] `README.md` - ç¤ºä¾‹ä»£ç 
- [ ] `docs/DEVELOPER_API_REFERENCE.md` - API ç« èŠ‚
- [ ] `docs/FOR_FLUTTER_DEVELOPERS.md` - API åˆ—è¡¨

**æ–°å¢åŠŸèƒ½**:
- [ ] `README.md` - Features ç« èŠ‚
- [ ] `README.md` - ä¸“é¢˜ç« èŠ‚ï¼ˆå¦‚éœ€è¦ï¼‰

**éªŒè¯**:
```bash
grep -r "æ–°API" README.md lib/ docs/DEVELOPER_API_REFERENCE.md
```

#### Step 4: ç¼–è¯‘æµ‹è¯•
```bash
# Debug æµ‹è¯•
cd example
flutter clean
flutter build windows --debug
# è¿è¡Œæµ‹è¯•éªŒè¯åŠŸèƒ½

# Release æ„å»º
flutter build windows --release
```
- [ ] Debug æ„å»ºæˆåŠŸ
- [ ] Release æ„å»ºæˆåŠŸ
- [ ] åŠŸèƒ½æµ‹è¯•é€šè¿‡
- [ ] æ— å†…å­˜æ³„æ¼

#### Step 5: æ„å»ºå‘å¸ƒåŒ…
```bash
.\scripts\build_release_v2.bat
```
- [ ] æ„å»ºæˆåŠŸ
- [ ] ç›®å½•ç»“æ„å®Œæ•´
- [ ] DLL æ–‡ä»¶æ­£ç¡®

#### Step 6: å‘å¸ƒåŒ…æ–‡æ¡£éªŒè¯

**ä½¿ç”¨ grep éªŒè¯**ï¼ˆé¿å…å¤æ‚ PowerShellï¼‰:

```bash
# 1. æ£€æŸ¥ README.md åŒ…å«æ–° API
grep "setApplicationName\|getStoragePath" release/anywp_engine_v{ç‰ˆæœ¬å·}/README.md

# 2. æ£€æŸ¥ CHANGELOG åŒ…å«æ–°ç‰ˆæœ¬
grep "4\.4\.0.*2025-11-06" release/anywp_engine_v{ç‰ˆæœ¬å·}/CHANGELOG_CN.md

# 3. æ£€æŸ¥ç‰ˆæœ¬å·
grep "version.*1\.2\.0" release/anywp_engine_v{ç‰ˆæœ¬å·}/pubspec.yaml

# 4. æ£€æŸ¥ Dart æºç åŒ…å«æ–° API
grep "setApplicationName\|getStoragePath" release/anywp_engine_v{ç‰ˆæœ¬å·}/lib/dart/anywp_engine.dart
```

**å¿…é¡»æ£€æŸ¥**:
- [ ] README.md åŒ…å«æ–°åŠŸèƒ½ï¼ˆgrep æ‰¾åˆ°åŒ¹é…ï¼‰
- [ ] CHANGELOG_CN.md åŒ…å«æ–°ç‰ˆæœ¬ï¼ˆgrep æ‰¾åˆ°åŒ¹é…ï¼‰
- [ ] pubspec.yaml ç‰ˆæœ¬å·æ­£ç¡®ï¼ˆgrep æ‰¾åˆ° 1.2.0ï¼‰
- [ ] anywp_engine.dart åŒ…å«æ–° APIï¼ˆgrep æ‰¾åˆ°åŒ¹é…ï¼‰

**æ–° API å¿…é¡»å‡ºç°åœ¨**:
- README.mdï¼ˆç¤ºä¾‹ä»£ç ï¼‰
- CHANGELOG_CN.mdï¼ˆåŠŸèƒ½è¯´æ˜ï¼‰
- lib/dart/anywp_engine.dartï¼ˆæºç æ³¨é‡Šï¼‰

**éªŒè¯ç¤ºä¾‹**ï¼ˆv1.2.0ï¼‰:
```bash
# éªŒè¯ç»“æœï¼š
âœ“ README.md: 4 matches (åŒ…å« setApplicationName/getStoragePath)
âœ“ CHANGELOG_CN.md: æ‰¾åˆ°ç‰ˆæœ¬ [4.4.0] - 2025-11-06
âœ“ pubspec.yaml: version: 1.2.0
âœ“ anywp_engine.dart: 6 matches (æ–° API æ–¹æ³•)
```

#### Step 7: åˆ›å»º Release Notes
- [ ] å¤åˆ¶ `docs/RELEASE_TEMPLATE.md`
- [ ] å¦å­˜ä¸º `release/GITHUB_RELEASE_NOTES_v{ç‰ˆæœ¬å·}.md`
- [ ] å¡«å†™å®Œæ•´å†…å®¹ï¼š
  - å‘å¸ƒäº®ç‚¹
  - æ–°å¢åŠŸèƒ½ï¼ˆè¯¦ç»†è¯´æ˜ + ä»£ç ç¤ºä¾‹ï¼‰
  - é‡æ„æ”¹è¿›
  - ä½¿ç”¨ç¤ºä¾‹
  - å‡çº§æŒ‡å—
  - æµ‹è¯•ç»“æœ

#### Step 8: Git æäº¤
```bash
git add release/ CHANGELOG_CN.md pubspec.yaml docs/ README.md .cursorrules

write("commit_msg.txt", "release: å‘å¸ƒ v1.x.0 - åŠŸèƒ½æè¿°")
git commit -F commit_msg.txt
delete_file("commit_msg.txt")
```
- [ ] æäº¤æˆåŠŸ
- [ ] å·¥ä½œåŒºå¹²å‡€

#### Step 9: æ¨é€åˆ° GitHub
```bash
git push origin main
```
- [ ] æ¨é€æˆåŠŸ
- [ ] GitHub å¯è§æœ€æ–°æäº¤

#### Step 10: åˆ›å»º GitHub Release
1. [ ] è®¿é—® GitHub Releases é¡µé¢
2. [ ] åˆ›å»ºæ–° Release
   - Tag: `v{ç‰ˆæœ¬å·}`
   - Title: `AnyWP Engine v{ç‰ˆæœ¬å·} - åŠŸèƒ½æè¿°`
   - Description: å¤åˆ¶ `release/GITHUB_RELEASE_NOTES_v{ç‰ˆæœ¬å·}.md`
3. [ ] ä¸Šä¼  ZIP: `release/anywp_engine_v{ç‰ˆæœ¬å·}.zip`
4. [ ] å‹¾é€‰ "Set as the latest release"
5. [ ] å‘å¸ƒæˆåŠŸ

#### Step 11: å‘å¸ƒåéªŒè¯
- [ ] Release é¡µé¢å¯è®¿é—®
- [ ] ZIP æ–‡ä»¶å¯ä¸‹è½½
- [ ] æ–‡æ¡£æ ¼å¼æ­£ç¡®
- [ ] æ ‡ç­¾åˆ›å»ºæˆåŠŸ

---

## æ–‡æ¡£ç»´æŠ¤åŸåˆ™

### âœ… å¿…é¡»ä¿ç•™çš„æ–‡æ¡£

**æ ¹ç›®å½•** (3ä¸ª):
- `README.md` - é¡¹ç›®ä¸»é¡µ + å®Œæ•´æŒ‡å—
- `CHANGELOG_CN.md` - æ›´æ–°æ—¥å¿—
- `QUICK_INTEGRATION.md` - å¿«é€Ÿé›†æˆ

**docs/** (22ä¸ª):
- Flutter å¼€å‘è€…æ–‡æ¡£
- Web å¼€å‘è€…æ–‡æ¡£
- æŠ€æœ¯æ–‡æ¡£
- æœ€ä½³å®è·µ

**å‘å¸ƒç›¸å…³**:
- `release/GITHUB_RELEASE_NOTES_v{ç‰ˆæœ¬å·}.md` - æ¯ä¸ªç‰ˆæœ¬çš„å‘å¸ƒè¯´æ˜

### âŒ ç¦æ­¢åˆ›å»ºçš„æ–‡æ¡£

**è¿‡ç¨‹æ€§æ–‡æ¡£**:
- âŒ `TEST_REPORT.md`
- âŒ `VERIFICATION_REPORT.md`
- âŒ `CHECKLIST.md`
- âŒ `SUMMARY.md`

**åŸåˆ™**: æµ‹è¯•ã€éªŒè¯ç­‰è¿‡ç¨‹åœ¨ä»£ç ä¸­å®Œæˆï¼Œä¸ç”ŸæˆæŠ¥å‘Šæ–‡æ¡£

---

## å¸¸ç”¨å‘½ä»¤

```bash
# å¼€å‘
.\scripts\build_and_run.bat       # æ„å»ºå¹¶è¿è¡Œ
.\scripts\debug_run.bat           # è°ƒè¯•æ¨¡å¼
.\scripts\test.bat                # å¿«é€Ÿæµ‹è¯•

# å‘å¸ƒ
.\scripts\build_release_v2.bat    # æ„å»º Release åŒ…
git push origin main              # æ¨é€åˆ° GitHub
```

---

## æ ¸å¿ƒç‰¹æ€§

### å­˜å‚¨ç³»ç»Ÿ (v1.2.0+)
- **åº”ç”¨çº§éš”ç¦»**: æ¯ä¸ªåº”ç”¨ç‹¬ç«‹ç›®å½• `%LOCALAPPDATA%\AnyWPEngine\[AppName]\`
- **æ— æ®‹ç•™å¸è½½**: åˆ é™¤åº”ç”¨ç›®å½•å³å¯
- **å‘åå…¼å®¹**: é»˜è®¤ä½¿ç”¨ "Default" åº”ç”¨å

### æµ‹è¯•é¡µé¢ (examples/)
- ğŸ¨ Simple - åŸºç¡€æµ‹è¯•
- ğŸ–±ï¸ Draggable - æ‹–æ‹½æ¼”ç¤º
- âš™ï¸ API Test - å®Œæ•´ API
- ğŸ‘† Click Test - ç‚¹å‡»æ£€æµ‹
- ğŸ‘ï¸ Visibility - çœç”µæµ‹è¯•
- âš›ï¸ React / ğŸ’š Vue - SPA æµ‹è¯•
- ğŸ“º iFrame Ads - å¹¿å‘Šæ£€æµ‹

---

**ç‰ˆæœ¬**: 1.2.0 (Changelog: 4.4.0) | **æ›´æ–°**: 2025-11-06
