# AnyWP Engine - Cursor Rules

## é¡¹ç›®æ¦‚è§ˆ
Flutter Windows æ’ä»¶ï¼Œå°† WebView2 åµŒå…¥ä¸ºäº¤äº’å¼æ¡Œé¢å£çº¸ï¼ˆæ˜¾ç¤ºåœ¨æ¡Œé¢å›¾æ ‡åæ–¹ï¼‰ã€‚

**æŠ€æœ¯æ ˆ**: Flutter 3.0+ | C++17 | WebView2 | CMake | JavaScript  
**å‘½å**: åŒ…å `anywp_engine` | ç±»å `AnyWPEngine` `AnyWPEnginePlugin`  
**æ ¸å¿ƒåŠŸèƒ½**: å£çº¸åµŒå…¥ | é¼ æ ‡äº¤äº’ | å…ƒç´ æ‹–æ‹½ | åº”ç”¨çº§å­˜å‚¨éš”ç¦» | çœç”µä¼˜åŒ–

---

## ç¼–ç è§„èŒƒ

### Dart
- ç±» `UpperCamelCase` | æ–¹æ³• `lowerCamelCase` | æ–‡ä»¶ `snake_case.dart`
- å…¬å…± API éœ€æ–‡æ¡£æ³¨é‡Š | å¼‚æ­¥ç”¨ `Future<T>` | ä½¿ç”¨ `flutter_lints`

### C++
- ç±»/æ–¹æ³• `PascalCase` | æˆå‘˜å˜é‡ `snake_case_` | å¸¸é‡ `UPPER_SNAKE_CASE`
- ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆç®¡ç† COM | RAII ç®¡ç†èµ„æº | æ£€æŸ¥ Win32 API è¿”å›å€¼

### JavaScript
- å…¨å±€ `window.AnyWP` | æ–¹æ³• `lowerCamelCase`
- æ ¸å¿ƒ API: `makeDraggable()` `saveState()` `loadState()` `onClick()`

---

## æ–‡ä»¶ç»„ç»‡

```
lib/                    # Dart API
windows/                # C++ å®ç° + anywp_sdk.js
  â”œâ”€â”€ include/anywp_engine/  # å…¬å…±å¤´æ–‡ä»¶
example/                # ç¤ºä¾‹åº”ç”¨
examples/               # æµ‹è¯• HTML (8ä¸ªæµ‹è¯•é¡µé¢)
docs/                   # æ–‡æ¡£ï¼ˆé¢å‘ Flutter/Web å¼€å‘è€…ï¼‰
scripts/                # æ„å»ºè„šæœ¬
release/                # å‘å¸ƒåŒ…
```

---

## å¸¸ç”¨å‘½ä»¤

```bash
# å¼€å‘
.\scripts\build_and_run.bat       # æ„å»ºå¹¶è¿è¡Œ
.\scripts\debug_run.bat           # è°ƒè¯•æ¨¡å¼ï¼ˆä¿ç•™æ—¥å¿—ï¼‰
.\scripts\test.bat                # å¿«é€Ÿæµ‹è¯•

# å‘å¸ƒ
.\scripts\build_release_v2.bat    # æ„å»º Release åŒ…
git push origin main              # æ¨é€åˆ° GitHubï¼ˆä¸ä½¿ç”¨è„šæœ¬ï¼‰
```

---

## æ ¸å¿ƒæ–‡æ¡£

### é¢å‘å¼€å‘è€…
- **Flutter å¼€å‘è€…**: `docs/FOR_FLUTTER_DEVELOPERS.md` (å¯¼èˆª) + `docs/DEVELOPER_API_REFERENCE.md` (API)
- **Web å¼€å‘è€…**: `docs/WEB_DEVELOPER_GUIDE_CN.md` + `docs/FOR_WEB_DEVELOPERS.md`
- **é›†æˆæŒ‡å—**: `docs/PACKAGE_USAGE_GUIDE_CN.md` + `docs/PRECOMPILED_DLL_INTEGRATION.md`
- **æœ€ä½³å®è·µ**: `docs/BEST_PRACTICES.md` + `docs/API_USAGE_EXAMPLES.md`
- **å­˜å‚¨éš”ç¦»**: `README.md` å­˜å‚¨éš”ç¦»ç« èŠ‚ (v1.2.0+)

### æŠ€æœ¯æ–‡æ¡£
- `docs/TECHNICAL_NOTES.md` - æŠ€æœ¯å®ç°ç»†èŠ‚
- `docs/API_BRIDGE.md` - API æ¡¥æ¥æœºåˆ¶
- `docs/INTEGRATION_ARCHITECTURE.md` - é›†æˆæ¶æ„

### ç”¨æˆ·æ–‡æ¡£
- `README.md` - é¡¹ç›®ä¸»é¡µ
- `docs/QUICK_START.md` - å¿«é€Ÿå¼€å§‹
- `docs/TROUBLESHOOTING.md` - æ•…éšœæ’é™¤

---

## AI å·¥ä½œæµ

### åŸºæœ¬åŸåˆ™
- **é»˜è®¤ä¸­æ–‡å›å¤**ï¼ˆæŠ€æœ¯æœ¯è¯­ä¿ç•™è‹±æ–‡ï¼‰
- **ç›´æ¥å®ç°**ï¼Œé¿å…å†—é•¿è§£é‡Š
- **è‡ªåŠ¨è°ƒè¯•**ï¼šè‡ªå·±ç¼–è¯‘ã€è¿è¡Œã€è¯»æ—¥å¿—ã€ä¼˜åŒ–
- **è‡ªåŠ¨æäº¤**ï¼šåŠŸèƒ½å®Œæˆåè‡ªåŠ¨ git commit

### æ–‡æ¡£æ›´æ–°
- ä¿®æ”¹åŠŸèƒ½ â†’ åŒæ­¥æ›´æ–°ç›¸å…³æ–‡æ¡£ + `CHANGELOG_CN.md`
- å‘å¸ƒå‰ â†’ ç¡®ä¿æ‰€æœ‰æ ¸å¿ƒæ–‡æ¡£åŒ…å«æ–°åŠŸèƒ½
- **ä¸åˆ›å»ºè¿‡ç¨‹æ€§æ–‡æ¡£**ï¼ˆæµ‹è¯•æŠ¥å‘Šã€éªŒè¯æŠ¥å‘Šç­‰ï¼‰

### Git æäº¤
```bash
# ä¸­æ–‡æäº¤ä¿¡æ¯ä½¿ç”¨æ–‡ä»¶æ–¹å¼ï¼ˆé¿å…ä¹±ç ï¼‰
write("commit_msg.txt", "æäº¤ä¿¡æ¯")
git commit -F commit_msg.txt
delete_file("commit_msg.txt")
```

### PowerShell æ³¨æ„
- **ç¦æ­¢** `&&` æ“ä½œç¬¦
- **ä½¿ç”¨** `;` åˆ†éš”å¤šå‘½ä»¤

---

## å‘å¸ƒæµç¨‹

### å‘å¸ƒå‰å‡†å¤‡
1. æ›´æ–°ç‰ˆæœ¬å·ï¼š`pubspec.yaml` + `scripts/build_release_v2.bat`
2. æ›´æ–° `CHANGELOG_CN.md`
3. **åŒæ­¥æ ¸å¿ƒæ–‡æ¡£**ï¼šREADME.md, API å‚è€ƒç­‰
4. æµ‹è¯•åŠŸèƒ½

### æ„å»ºå‘å¸ƒ
```bash
.\scripts\build_release_v2.bat
```

### æäº¤
```bash
git add release/ CHANGELOG_CN.md pubspec.yaml docs/ README.md
# ä½¿ç”¨æ–‡ä»¶æ–¹å¼æäº¤ï¼ˆé¿å…ä¸­æ–‡ä¹±ç ï¼‰
write("commit_msg.txt", "æäº¤ä¿¡æ¯")
git commit -F commit_msg.txt
delete_file("commit_msg.txt")
```

### æ¨é€åˆ° GitHub
```bash
# æ¨é€æ‰€æœ‰æäº¤ï¼ˆé¿å…ç›´æ¥ä½¿ç”¨è„šæœ¬ï¼‰
git push origin main

# å¦‚æœéœ€è¦å¼ºåˆ¶æ¨é€ï¼ˆæ…ç”¨ï¼‰
# git push origin main --force
```

**æ³¨æ„**: 
- âŒ ä¸ä½¿ç”¨ `.\scripts\PUSH_TO_GITHUB.bat`ï¼ˆå·²åºŸå¼ƒï¼‰
- âœ… ç›´æ¥ä½¿ç”¨ `git push origin main`
- âš ï¸ ä¸­æ–‡æäº¤ä¿¡æ¯å·²é€šè¿‡ `-F commit_msg.txt` æ­£ç¡®å¤„ç†

### GitHub Release
1. æ ‡ç­¾: `v{ç‰ˆæœ¬å·}` (å¦‚ v1.2.0)
2. ä¸Šä¼ : `release/anywp_engine_v{ç‰ˆæœ¬å·}.zip`
3. è¯´æ˜: å¤åˆ¶ `release/GITHUB_RELEASE_NOTES_v{ç‰ˆæœ¬å·}.md`

---

## æ ¸å¿ƒç‰¹æ€§

### å­˜å‚¨ç³»ç»Ÿ
- **åº”ç”¨çº§éš”ç¦»**: æ¯ä¸ªåº”ç”¨ç‹¬ç«‹ç›®å½• `%LOCALAPPDATA%\AnyWPEngine\[AppName]\`
- **æ— æ®‹ç•™å¸è½½**: åˆ é™¤åº”ç”¨ç›®å½•å³å¯
- **å‘åå…¼å®¹**: é»˜è®¤ä½¿ç”¨ "Default" åº”ç”¨å

### æµ‹è¯•é¡µé¢ (examples/)
- ğŸ¨ Simple - åŸºç¡€æµ‹è¯•
- ğŸ–±ï¸ Draggable - æ‹–æ‹½æ¼”ç¤º
- âš™ï¸ API Test - å®Œæ•´ API
- ğŸ‘† Click Test - ç‚¹å‡»æ£€æµ‹
- ğŸ‘ï¸ Visibility - çœç”µæµ‹è¯•
- âš›ï¸ React / ğŸ’š Vue - SPA æµ‹è¯•
- ğŸ“º iFrame Ads - å¹¿å‘Šæ£€æµ‹

---

**ç‰ˆæœ¬**: 1.2.0 (Changelog: 4.4.0) | **æ›´æ–°**: 2025-11-06
