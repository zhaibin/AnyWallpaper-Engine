# ğŸ—ï¸ AnyWP Engine é›†æˆæ¶æ„

æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜ AnyWP Engine çš„é›†æˆæ¶æ„ã€å·¥ä½œæµç¨‹å’Œæœ€ä½³å®è·µã€‚

---

## ğŸ“Š æ¶æ„æ¦‚è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ä½ çš„ Flutter åº”ç”¨                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              UI Layer (Material/Cupertino)               â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚   â”‚
â”‚  â”‚  â”‚  Button    â”‚  â”‚  TextField â”‚  â”‚   Toggle   â”‚         â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                            â”‚                                     â”‚
â”‚                            â–¼                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚            Business Logic Layer (Dart)                   â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚  â”‚  â”‚   import 'package:anywp_engine/anywp_engine.dart'â”‚    â”‚   â”‚
â”‚  â”‚  â”‚                                                   â”‚    â”‚   â”‚
â”‚  â”‚  â”‚   AnyWPEngine.initializeWallpaper(...)           â”‚    â”‚   â”‚
â”‚  â”‚  â”‚   AnyWPEngine.stopWallpaper()                    â”‚    â”‚   â”‚
â”‚  â”‚  â”‚   AnyWPEngine.navigateToUrl(...)                 â”‚    â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ MethodChannel
                            â”‚ ('anywp_engine')
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AnyWP Engine Plugin                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              Dart Plugin Interface                       â”‚   â”‚
â”‚  â”‚  (lib/anywp_engine.dart)                                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                            â”‚                                     â”‚
â”‚                            â”‚ Platform Channel                    â”‚
â”‚                            â–¼                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚         C++ Native Implementation                        â”‚   â”‚
â”‚  â”‚  (windows/anywp_engine_plugin.cpp)                      â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  â€¢ FindProgmanWindow()                                   â”‚   â”‚
â”‚  â”‚  â€¢ FindWorkerW()                                         â”‚   â”‚
â”‚  â”‚  â€¢ CreateWebView2Environment()                           â”‚   â”‚
â”‚  â”‚  â€¢ SetupMouseTransparency()                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ Win32 API
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Windows Desktop System                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Progman                                                 â”‚   â”‚
â”‚  â”‚   â”œâ”€ SHELLDLL_DefView (Desktop Icons) â† Z-Order: Front  â”‚   â”‚
â”‚  â”‚   â””â”€ WebView2 Host Window â† Z-Order: Back               â”‚   â”‚
â”‚  â”‚       â””â”€ Microsoft Edge WebView2 Controller              â”‚   â”‚
â”‚  â”‚           â””â”€ Browser Engine (Chromium)                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ é›†æˆå·¥ä½œæµç¨‹

### æ–¹å¼ 1: æœ¬åœ°è·¯å¾„å¼•ç”¨

```
å¼€å‘é˜¶æ®µï¼ˆæœ¬åœ°æµ‹è¯•ï¼‰
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                              â”‚
â”‚  æ­¥éª¤ 1: é¡¹ç›®ç›®å½•ç»“æ„                                          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                     â”‚
â”‚  Projects/                                                   â”‚
â”‚  â”œâ”€ AnyWP_Engine/          â† æ’ä»¶æºç                         â”‚
â”‚  â”‚  â”œâ”€ lib/                                                 â”‚
â”‚  â”‚  â”œâ”€ windows/                                             â”‚
â”‚  â”‚  â””â”€ pubspec.yaml                                         â”‚
â”‚  â”‚                                                          â”‚
â”‚  â””â”€ MyWallpaperApp/        â† ä½ çš„åº”ç”¨                        â”‚
â”‚     â”œâ”€ lib/                                                 â”‚
â”‚     â””â”€ pubspec.yaml                                         â”‚
â”‚                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  æ­¥éª¤ 2: é…ç½®ä¾èµ–                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                             â”‚
â”‚  åœ¨ MyWallpaperApp/pubspec.yaml ä¸­:                          â”‚
â”‚                                                              â”‚
â”‚  dependencies:                                               â”‚
â”‚    anywp_engine:                                             â”‚
â”‚      path: ../AnyWP_Engine                                   â”‚
â”‚                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  æ­¥éª¤ 3: è·å–ä¾èµ–                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                             â”‚
â”‚  $ cd MyWallpaperApp                                         â”‚
â”‚  $ flutter pub get                                           â”‚
â”‚                                                              â”‚
â”‚  âœ“ ä¾èµ–è§£æå®Œæˆ                                              â”‚
â”‚  âœ“ æ’ä»¶æ³¨å†Œåˆ°é¡¹ç›®                                            â”‚
â”‚                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  æ­¥éª¤ 4: ä½¿ç”¨æ’ä»¶                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                             â”‚
â”‚  import 'package:anywp_engine/anywp_engine.dart';            â”‚
â”‚                                                              â”‚
â”‚  await AnyWPEngine.initializeWallpaper(                      â”‚
â”‚    url: 'https://www.bing.com',                              â”‚
â”‚    enableMouseTransparent: true,                             â”‚
â”‚  );                                                          â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   âœ“ å¼€å‘å®Œæˆï¼Œå¯ä»¥å®æ—¶ä¿®æ”¹æ’ä»¶ä»£ç 
```

### æ–¹å¼ 2: Git ä»“åº“å¼•ç”¨

```
å›¢é˜Ÿåä½œé˜¶æ®µï¼ˆç‰ˆæœ¬ç®¡ç†ï¼‰
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                              â”‚
â”‚  æ­¥éª¤ 1: å‘å¸ƒåˆ° Git ä»“åº“                                      â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                    â”‚
â”‚  $ cd AnyWP_Engine                                           â”‚
â”‚  $ git init                                                  â”‚
â”‚  $ git add .                                                 â”‚
â”‚  $ git commit -m "Release v1.0.0"                            â”‚
â”‚  $ git tag v1.0.0                                            â”‚
â”‚  $ git push origin main --tags                               â”‚
â”‚                                                              â”‚
â”‚  âœ“ ä»£ç æ¨é€åˆ° GitHub                                         â”‚
â”‚  âœ“ ç‰ˆæœ¬æ ‡ç­¾åˆ›å»º                                              â”‚
â”‚                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  æ­¥éª¤ 2: å›¢é˜Ÿæˆå‘˜ä½¿ç”¨                                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                          â”‚
â”‚  åœ¨ MyWallpaperApp/pubspec.yaml ä¸­:                          â”‚
â”‚                                                              â”‚
â”‚  dependencies:                                               â”‚
â”‚    anywp_engine:                                             â”‚
â”‚      git:                                                    â”‚
â”‚        url: https://github.com/user/anywp_engine.git         â”‚
â”‚        ref: v1.0.0                                           â”‚
â”‚                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  æ­¥éª¤ 3: ç‰ˆæœ¬æ›´æ–°æµç¨‹                                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                          â”‚
â”‚  æ’ä»¶ç»´æŠ¤è€…:                                                  â”‚
â”‚    $ git tag v1.0.1                                          â”‚
â”‚    $ git push origin v1.0.1                                  â”‚
â”‚                                                              â”‚
â”‚  ä½¿ç”¨è€…æ›´æ–°:                                                  â”‚
â”‚    ä¿®æ”¹ pubspec.yaml: ref: v1.0.1                            â”‚
â”‚    $ flutter pub upgrade anywp_engine                        â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   âœ“ ç‰ˆæœ¬å¯æ§ï¼Œå›¢é˜Ÿåä½œæ–¹ä¾¿
```

### æ–¹å¼ 3: pub.dev å‘å¸ƒ

```
ç”Ÿäº§ç¯å¢ƒï¼ˆå…¬å¼€å‘å¸ƒï¼‰
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                              â”‚
â”‚  æ­¥éª¤ 1: å‡†å¤‡å‘å¸ƒ                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                             â”‚
â”‚  âœ“ å®Œå–„ README.md                                            â”‚
â”‚  âœ“ æ·»åŠ  LICENSE æ–‡ä»¶                                         â”‚
â”‚  âœ“ æ›´æ–° CHANGELOG.md                                         â”‚
â”‚  âœ“ æ›´æ–° pubspec.yaml:                                        â”‚
â”‚    - version: 1.0.0                                          â”‚
â”‚    - description: å®Œæ•´æè¿°                                    â”‚
â”‚    - homepage/repository                                     â”‚
â”‚                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  æ­¥éª¤ 2: éªŒè¯å’Œå‘å¸ƒ                                           â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                          â”‚
â”‚  $ flutter pub publish --dry-run                             â”‚
â”‚  âœ“ æ£€æŸ¥é€šè¿‡                                                  â”‚
â”‚                                                              â”‚
â”‚  $ flutter pub publish                                       â”‚
â”‚  âœ“ å‘å¸ƒæˆåŠŸ                                                  â”‚
â”‚                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  æ­¥éª¤ 3: ç”¨æˆ·ä½¿ç”¨                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                             â”‚
â”‚  dependencies:                                               â”‚
â”‚    anywp_engine: ^1.0.0                                      â”‚
â”‚                                                              â”‚
â”‚  $ flutter pub get                                           â”‚
â”‚  âœ“ è‡ªåŠ¨ä¸‹è½½æœ€æ–°å…¼å®¹ç‰ˆæœ¬                                       â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   âœ“ æœ€è§„èŒƒçš„åˆ†å‘æ–¹å¼
```

---

## ğŸ¯ æ•°æ®æµå›¾

### API è°ƒç”¨æµç¨‹

```
ç”¨æˆ·ä»£ç                       Plugin æ¥å£              Native å®ç°                Windows ç³»ç»Ÿ
â”€â”€â”€â”€â”€â”€â”€â”€                      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

await                    â†’    MethodChannel       â†’   HandleMethodCall      â†’   Win32 API
AnyWPEngine.             â†’    .invokeMethod       â†’   switch (method)       â†’   CreateWindow
initializeWallpaper(     â†’    ("initialize")      â†’   case "initialize":    â†’   WebView2
  url: "...",                                                                    
  transparent: true                                                              
)                                                                                
                                                                                 
    â”‚                                                                            
    â”‚ ç­‰å¾…ç»“æœ                                                                    
    â–¼                                                                            
                         â†    Future<bool>        â†   result->Success()     â†   æˆåŠŸå›è°ƒ
                                                                                 
è¿”å› true/false                                                                  
```

### WebView2 åˆå§‹åŒ–æµç¨‹

```
1. FindProgmanWindow()
   â””â”€> æŸ¥æ‰¾ "Progman" çª—å£
       â””â”€> HWND progman

2. FindWorkerW()
   â””â”€> åœ¨ Progman ä¸‹æŸ¥æ‰¾åˆé€‚çš„ WorkerW
       â””â”€> HWND workerw

3. CreateHostWindow()
   â””â”€> åˆ›å»º WS_CHILD çª—å£
       â”œâ”€> çˆ¶çª—å£: Progman
       â”œâ”€> æ ·å¼: WS_CHILD | WS_VISIBLE
       â””â”€> HWND host

4. SetZOrder()
   â””â”€> è®¾ç½®åœ¨å›¾æ ‡å±‚ä¸‹æ–¹
       â””â”€> SetWindowPos(host, SHELLDLL_DefView, ...)

5. CreateWebView2Environment()
   â””â”€> åˆå§‹åŒ– WebView2
       â”œâ”€> CreateCoreWebView2Environment
       â”œâ”€> CreateCoreWebView2Controller
       â””â”€> Navigate(url)

6. SetupMouseTransparency()
   â””â”€> é…ç½®é¼ æ ‡ç©¿é€ï¼ˆå¯é€‰ï¼‰
       â””â”€> SetWindowLong(host, GWL_EXSTYLE, WS_EX_TRANSPARENT)
```

---

## ğŸ“¦ ä¾èµ–å…³ç³»å›¾

```
ä½ çš„åº”ç”¨ (MyWallpaperApp)
    â”‚
    â”œâ”€ dependencies:
    â”‚   â”œâ”€ flutter (SDK)
    â”‚   â””â”€ anywp_engine
    â”‚       â”‚
    â”‚       â”œâ”€ dependencies:
    â”‚       â”‚   â”œâ”€ flutter (SDK)
    â”‚       â”‚   â””â”€ plugin_platform_interface ^2.0.0
    â”‚       â”‚
    â”‚       â””â”€ windows:
    â”‚           â”œâ”€ anywp_engine_plugin.cpp
    â”‚           â”œâ”€ anywp_engine_plugin.h
    â”‚           â”œâ”€ CMakeLists.txt
    â”‚           â””â”€ packages:
    â”‚               â””â”€ Microsoft.Web.WebView2.1.0.2592.51
    â”‚
    â””â”€ windows:
        â”œâ”€ flutter/
        â”‚   â””â”€ generated_plugins.cmake
        â”‚       â””â”€ include(anywp_engine)  â† è‡ªåŠ¨ç”Ÿæˆ
        â”‚
        â””â”€ CMakeLists.txt
            â””â”€ include(flutter/generated_plugins.cmake)
```

---

## ğŸ”§ æ„å»ºæµç¨‹

```
å¼€å‘æ¨¡å¼ (flutter run)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. è§£æä¾èµ–
   $ flutter pub get
   â””â”€> ä¸‹è½½/é“¾æ¥ anywp_engine
       â””â”€> æ£€æŸ¥ windows/packages/WebView2

2. ç”Ÿæˆæ’ä»¶é…ç½®
   â””â”€> windows/flutter/generated_plugins.cmake
   â””â”€> windows/flutter/generated_plugin_registrant.cc

3. CMake é…ç½®
   $ cmake -B build
   â””â”€> åŒ…å«æ’ä»¶çš„ CMakeLists.txt
   â””â”€> é“¾æ¥ WebView2 åº“

4. ç¼–è¯‘
   $ cmake --build build
   â””â”€> ç¼–è¯‘ C++ ä»£ç 
   â””â”€> ç”Ÿæˆ .exe å’Œ .dll

5. è¿è¡Œ
   $ build/windows/runner/Debug/MyWallpaperApp.exe
   â””â”€> åŠ è½½ Flutter å¼•æ“
   â””â”€> æ³¨å†Œæ’ä»¶
   â””â”€> å¯åŠ¨åº”ç”¨


Release æ¨¡å¼ (flutter build)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. ä¼˜åŒ–æ„å»º
   $ flutter build windows --release
   â””â”€> Release ä¼˜åŒ–
   â””â”€> ç§»é™¤è°ƒè¯•ç¬¦å·

2. æ‰“åŒ…
   â””â”€> build/windows/runner/Release/
       â”œâ”€ MyWallpaperApp.exe
       â”œâ”€ flutter_windows.dll
       â””â”€ å…¶ä»–ä¾èµ– DLL

3. åˆ†å‘
   â””â”€> å¯ä»¥ç›´æ¥åˆ†å‘ Release ç›®å½•
```

---

## ğŸ¨ æœ€ä½³å®è·µ

### 1. å¼€å‘é˜¶æ®µ

```yaml
# ä½¿ç”¨æœ¬åœ°è·¯å¾„ï¼Œæ–¹ä¾¿è°ƒè¯•
dependencies:
  anywp_engine:
    path: ../AnyWP_Engine
```

**ä¼˜ç‚¹**:
- âœ… å¯ä»¥å³æ—¶ä¿®æ”¹æ’ä»¶ä»£ç 
- âœ… æ— éœ€æ¨é€åˆ°è¿œç¨‹ä»“åº“
- âœ… è°ƒè¯•æ–¹ä¾¿

### 2. å›¢é˜Ÿåä½œ

```yaml
# ä½¿ç”¨ Git å¼•ç”¨ï¼Œé”å®šç‰ˆæœ¬
dependencies:
  anywp_engine:
    git:
      url: https://github.com/yourteam/anywp_engine.git
      ref: v1.0.0  # æ˜ç¡®æŒ‡å®šç‰ˆæœ¬
```

**ä¼˜ç‚¹**:
- âœ… å›¢é˜Ÿæˆå‘˜ä½¿ç”¨åŒä¸€ç‰ˆæœ¬
- âœ… ç‰ˆæœ¬å¯è¿½æº¯
- âœ… æ”¯æŒç§æœ‰ä»“åº“

### 3. ç”Ÿäº§ç¯å¢ƒ

```yaml
# ä½¿ç”¨ pub.devï¼Œè¯­ä¹‰åŒ–ç‰ˆæœ¬
dependencies:
  anywp_engine: ^1.0.0
```

**ä¼˜ç‚¹**:
- âœ… è‡ªåŠ¨è·å–å…¼å®¹æ›´æ–°
- âœ… æœ€è§„èŒƒçš„æ–¹å¼
- âœ… pub.dev æä¾›é¢å¤–ä¿¡æ¯

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: ä¾èµ–æ›´æ–°ä¸ç”Ÿæ•ˆï¼Ÿ

```bash
# æ¸…ç†å¹¶é‡æ–°è·å–
flutter clean
flutter pub get
```

### Q2: WebView2 æ‰¾ä¸åˆ°ï¼Ÿ

```bash
# ç¡®ä¿ WebView2 SDK å·²å®‰è£…
cd AnyWP_Engine/scripts
setup_webview2.bat
```

### Q3: Git å¼•ç”¨æ›´æ–°å¤±è´¥ï¼Ÿ

```yaml
# æ–¹æ³• 1: ä¿®æ”¹ ref ç‰ˆæœ¬
ref: v1.0.1  # ä» v1.0.0 æ”¹ä¸º v1.0.1

# æ–¹æ³• 2: å¼ºåˆ¶æ›´æ–°
flutter pub upgrade anywp_engine --major-versions
```

### Q4: æ„å»ºæ—¶æ‰¾ä¸åˆ°å¤´æ–‡ä»¶ï¼Ÿ

```cmake
# æ£€æŸ¥ windows/flutter/generated_plugins.cmake
# åº”è¯¥åŒ…å« anywp_engine çš„è·¯å¾„é…ç½®
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [å¿«é€Ÿé›†æˆæŒ‡å—](../QUICK_INTEGRATION.md)
- [å®Œæ•´ä½¿ç”¨æŒ‡å—](PACKAGE_USAGE_GUIDE_CN.md)
- [API æ–‡æ¡£](API_BRIDGE.md)
- [æŠ€æœ¯ç»†èŠ‚](TECHNICAL_NOTES.md)

---

**æœ€åæ›´æ–°**: 2025-11-01

